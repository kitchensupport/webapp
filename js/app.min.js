(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * lodash 3.1.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern modularize exports="npm" -o ./`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
var getNative = require('lodash._getnative');

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Native method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeNow = getNative(Date, 'now');

/**
 * Gets the number of milliseconds that have elapsed since the Unix epoch
 * (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @category Date
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => logs the number of milliseconds it took for the deferred function to be invoked
 */
var now = nativeNow || function() {
  return new Date().getTime();
};

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed invocations. Provide an options object to indicate that `func`
 * should be invoked on the leading and/or trailing edge of the `wait` timeout.
 * Subsequent calls to the debounced function return the result of the last
 * `func` invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
 * on the trailing edge of the timeout only if the the debounced function is
 * invoked more than once during the `wait` timeout.
 *
 * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options] The options object.
 * @param {boolean} [options.leading=false] Specify invoking on the leading
 *  edge of the timeout.
 * @param {number} [options.maxWait] The maximum time `func` is allowed to be
 *  delayed before it is invoked.
 * @param {boolean} [options.trailing=true] Specify invoking on the trailing
 *  edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // avoid costly calculations while the window size is in flux
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // invoke `sendMail` when the click event is fired, debouncing subsequent calls
 * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // ensure `batchLog` is invoked once after 1 second of debounced calls
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', _.debounce(batchLog, 250, {
 *   'maxWait': 1000
 * }));
 *
 * // cancel a debounced call
 * var todoChanges = _.debounce(batchLog, 1000);
 * Object.observe(models.todo, todoChanges);
 *
 * Object.observe(models, function(changes) {
 *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {
 *     todoChanges.cancel();
 *   }
 * }, ['delete']);
 *
 * // ...at some point `models.todo` is changed
 * models.todo.completed = true;
 *
 * // ...before 1 second has passed `models.todo` is deleted
 * // which cancels the debounced `todoChanges` call
 * delete models.todo;
 */
function debounce(func, wait, options) {
  var args,
      maxTimeoutId,
      result,
      stamp,
      thisArg,
      timeoutId,
      trailingCall,
      lastCalled = 0,
      maxWait = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = wait < 0 ? 0 : (+wait || 0);
  if (options === true) {
    var leading = true;
    trailing = false;
  } else if (isObject(options)) {
    leading = !!options.leading;
    maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function cancel() {
    if (timeoutId) {
      clearTimeout(timeoutId);
    }
    if (maxTimeoutId) {
      clearTimeout(maxTimeoutId);
    }
    lastCalled = 0;
    maxTimeoutId = timeoutId = trailingCall = undefined;
  }

  function complete(isCalled, id) {
    if (id) {
      clearTimeout(id);
    }
    maxTimeoutId = timeoutId = trailingCall = undefined;
    if (isCalled) {
      lastCalled = now();
      result = func.apply(thisArg, args);
      if (!timeoutId && !maxTimeoutId) {
        args = thisArg = undefined;
      }
    }
  }

  function delayed() {
    var remaining = wait - (now() - stamp);
    if (remaining <= 0 || remaining > wait) {
      complete(trailingCall, maxTimeoutId);
    } else {
      timeoutId = setTimeout(delayed, remaining);
    }
  }

  function maxDelayed() {
    complete(trailing, timeoutId);
  }

  function debounced() {
    args = arguments;
    stamp = now();
    thisArg = this;
    trailingCall = trailing && (timeoutId || !leading);

    if (maxWait === false) {
      var leadingCall = leading && !timeoutId;
    } else {
      if (!maxTimeoutId && !leading) {
        lastCalled = stamp;
      }
      var remaining = maxWait - (stamp - lastCalled),
          isCalled = remaining <= 0 || remaining > maxWait;

      if (isCalled) {
        if (maxTimeoutId) {
          maxTimeoutId = clearTimeout(maxTimeoutId);
        }
        lastCalled = stamp;
        result = func.apply(thisArg, args);
      }
      else if (!maxTimeoutId) {
        maxTimeoutId = setTimeout(maxDelayed, remaining);
      }
    }
    if (isCalled && timeoutId) {
      timeoutId = clearTimeout(timeoutId);
    }
    else if (!timeoutId && wait !== maxWait) {
      timeoutId = setTimeout(delayed, wait);
    }
    if (leadingCall) {
      isCalled = true;
      result = func.apply(thisArg, args);
    }
    if (isCalled && !timeoutId && !maxTimeoutId) {
      args = thisArg = undefined;
    }
    return result;
  }
  debounced.cancel = cancel;
  return debounced;
}

/**
 * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.
 * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(1);
 * // => false
 */
function isObject(value) {
  // Avoid a V8 JIT bug in Chrome 19-20.
  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

module.exports = debounce;

},{"lodash._getnative":2}],2:[function(require,module,exports){
/**
 * lodash 3.9.1 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern modularize exports="npm" -o ./`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

/** `Object#toString` result references. */
var funcTag = '[object Function]';

/** Used to detect host constructors (Safari > 5). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/**
 * Checks if `value` is object-like.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var fnToString = Function.prototype.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = object == null ? undefined : object[key];
  return isNative(value) ? value : undefined;
}

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in older versions of Chrome and Safari which return 'function' for regexes
  // and Safari 8 equivalents which return 'object' for typed array constructors.
  return isObject(value) && objToString.call(value) == funcTag;
}

/**
 * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.
 * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(1);
 * // => false
 */
function isObject(value) {
  // Avoid a V8 JIT bug in Chrome 19-20.
  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is a native function.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function, else `false`.
 * @example
 *
 * _.isNative(Array.prototype.push);
 * // => true
 *
 * _.isNative(_);
 * // => false
 */
function isNative(value) {
  if (value == null) {
    return false;
  }
  if (isFunction(value)) {
    return reIsNative.test(fnToString.call(value));
  }
  return isObjectLike(value) && reIsHostCtor.test(value);
}

module.exports = getNative;

},{}],3:[function(require,module,exports){
'use strict';

require('./bootstrap');

require('./routes');

require('./services');

require('./controllers');

require('./directives');

},{"./bootstrap":4,"./controllers":19,"./directives":24,"./routes":25,"./services":29}],4:[function(require,module,exports){
(function (global){
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _angular = (typeof window !== "undefined" ? window['angular'] : typeof global !== "undefined" ? global['angular'] : null);

var _angular2 = _interopRequireDefault(_angular);

var _utilsConstants = require('./utils/constants');

var app = _angular2['default'].module(_utilsConstants.appName, ['ngMaterial', 'ngMessages', 'ngCookies', 'ngStorage', 'ui.router']);
exports.app = app;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./utils/constants":30}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function AccountController($scope) {

    // Require user authentication.
    $scope.auth = $scope.auth || {};
    $scope.auth.required = true;
}

exports['default'] = ['$scope', AccountController];
module.exports = exports['default'];

},{}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
function FooterController() {}

exports["default"] = [FooterController];
module.exports = exports["default"];

},{}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function HeaderController($scope) {
    $scope.openMenu = function ($mdOpenMenu, ev) {
        $mdOpenMenu(ev);
    };
}

exports['default'] = ['$scope', HeaderController];
module.exports = exports['default'];

},{}],8:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
function HomeController() {}

exports["default"] = [HomeController];
module.exports = exports["default"];

},{}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function LoginController($scope, $rootScope, $http, $state, $mdDialog, AuthService) {
    $scope.loginSubmitting = false;

    $scope.login = function () {
        $scope.loginSubmitting = true;
        $scope.loginForm = { general: {}, email: {}, password: {} };

        // Do some simple input validation.
        if (!$scope.account) {
            $scope.loginForm.general['no-input'] = true;
            $scope.loginSubmitting = false;
            return;
        } else if (!$scope.account.password || $scope.account.password.length === 0) {
            $scope.loginForm.password.required = true;
            $scope.loginSubmitting = false;
            return;
        }

        AuthService.login({ email: $scope.account.email, password: $scope.account.password, remember: $scope.account.remember }).then(function () {
            if (!AuthService.loginModal.isOpen()) {
                $state.go('home');
            } else {

                // If we're logging in through the modal, don't redirect.
                AuthService.loginModal.close();
            }
        })['catch'](function () {
            $scope.loginForm.general.incorrect = true;
        })['finally'](function () {
            $scope.loginSubmitting = false;
        });
    };

    $scope.openLoginModal = function ($event) {
        AuthService.loginModal.open($event);
    };

    $scope.closeLoginModal = function () {
        AuthService.loginModal.close();
    };
}

exports['default'] = ['$scope', '$rootScope', '$http', '$state', '$mdDialog', 'AuthService', LoginController];
module.exports = exports['default'];

},{}],10:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function MainController($rootScope, $localStorage, $sessionStorage, AuthService) {
    $rootScope.modals = {};
    $rootScope.auth = {};
    $rootScope.auth.logout = AuthService.logout;

    $rootScope.$on('$stateChangeStart', function () {
        $rootScope.auth.required = false;
    });

    // Check to see if there's a token in storage somewhere.
    if (!AuthService.getCurrentUser()) {
        if ($localStorage.ksLoginToken !== undefined && $localStorage.ksLoginToken !== 'undefined') {
            AuthService.login({ api_token: $localStorage.ksLoginToken });
        } else if ($sessionStorage.ksLoginToken !== undefined && $sessionStorage.ksLoginToken !== 'undefined') {
            AuthService.login({ api_token: $sessionStorage.ksLoginToken });
        }
    }

    // Update the scope whenever user information changes.
    $rootScope.$watch(AuthService.getCurrentUser, function (user) {
        $rootScope.auth.user = user;
    });
}

exports['default'] = ['$rootScope', '$localStorage', '$sessionStorage', 'AuthService', MainController];
module.exports = exports['default'];

},{}],11:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _lodashDebounce = require('lodash.debounce');

var _lodashDebounce2 = _interopRequireDefault(_lodashDebounce);

function MyIngredientsController($rootScope, $scope, IngredientService) {

    // Require user authentication.
    $rootScope.auth = $rootScope.auth || {};
    $rootScope.auth.required = true;

    var ingredientsPerPage = 15;

    $scope.searchedIngredients = { status: -1 };
    $scope.pantry = { status: -1, data: {} };

    function parsePagination(data, limit, offset) {
        var page = {
            buttons: [],
            pageCount: Math.ceil(data.matches / limit),
            currPage: Math.ceil(offset / limit)
        };

        for (var i = 0; i < page.pageCount; i++) {
            if (i === page.currPage) {
                page.buttons[i] = 'disabled';
            } else {
                page.buttons[i] = 'enabled';
            }
        }

        return page;
    }

    $scope.$watch('search.term', (0, _lodashDebounce2['default'])(function (term) {
        $scope.getIngredients(0, term);
    }, 350));

    $scope.getIngredients = function () {
        var page = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];
        var searchTerm = arguments.length <= 1 || arguments[1] === undefined ? '%20' : arguments[1];

        var term = searchTerm;

        if (!term || term.length === 0) {
            term = '%20';
        }

        var offset = page * ingredientsPerPage;

        IngredientService.getSearch({ searchTerm: term, offset: offset }).then(function (response) {
            $scope.searchedIngredients = response;
            $scope.searchedIngredients.pagination = parsePagination(response.data, ingredientsPerPage, offset);
            return true;
        }, function () {
            $scope.searchedIngredients.status = 500;
            return false;
        });
    };

    $scope.getPantry = function () {
        $scope.pantry = { status: -1, data: {} };

        IngredientService.getPantry().then(function (response) {
            $scope.pantry = response;
            console.log(response);
        })['catch'](function (err) {
            console.log('Error getting pantry: ' + JSON.stringify(err));
        });
    };

    $scope.addPantry = function (id) {
        IngredientService.addPantry(id).then(function () {
            $scope.getPantry();
        })['catch'](function (err) {
            console.log('Error adding ingredient: ' + JSON.stringify(err));
        });
    };

    $scope.removePantry = function (id) {
        IngredientService.removePantry(id).then(function () {
            $scope.getPantry();
        })['catch'](function (err) {
            console.log('Error removing ingredient: ' + JSON.stringify(err));
        });
    };

    $scope.nextPageIngredients = function () {
        console.log($scope.ingredients);
        var limit = +$scope.ingredients.data.params.limit;
        var offset = +$scope.ingredients.data.params.offset + limit;
        var params = { limit: limit, offset: offset };

        $scope.getIngredients(params);
    };

    $scope.previousPageIngredients = function () {
        console.log($scope.ingredients);
        var limit = +$scope.ingredients.data.params.limit;
        var offset = +$scope.ingredients.data.params.offset - limit;

        if (offset < 0) {
            offset = 0;
        }

        var params = { limit: limit, offset: offset };

        $scope.getIngredients(params);
    };
}

exports['default'] = ['$rootScope', '$scope', 'IngredientService', MyIngredientsController];
module.exports = exports['default'];

},{"lodash.debounce":1}],12:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function MyRecipesController($rootScope, $scope, RecipeService) {

    // Require user authentication.
    $rootScope.auth = $rootScope.auth || {};
    $rootScope.auth.required = true;

    $scope.getLikedRecipes = function () {
        if ($scope.likedRecipes && $scope.likedRecipes.status === 200) {
            return true;
        }

        $scope.likedRecipes = { status: -1, data: {} };

        RecipeService.getLiked().then(function (response) {
            $scope.likedRecipes = response;
            return true;
        }, function () {
            $scope.likedRecipes.status = 500;
            return false;
        });
    };

    $scope.getFavoritedRecipes = function () {
        if ($scope.favoritedRecipes && $scope.favoritedRecipes.status === 200) {
            return true;
        }

        $scope.favoritedRecipes = { status: -1, data: {} };

        RecipeService.getFavorited().then(function (response) {
            $scope.favoritedRecipes = response;
            return true;
        }, function () {
            $scope.favoritedRecipes.status = 500;
            return false;
        });
    };

    $scope.getCompletedRecipes = function () {
        if ($scope.completedRecipes && $scope.completedRecipes.status === 200) {
            return true;
        }

        $scope.completedRecipes = { status: -1, data: {} };

        RecipeService.getCompleted().then(function (response) {
            $scope.completedRecipes = response;
            return true;
        }, function () {
            $scope.completedRecipes.status = 500;
            return false;
        });
    };
}

exports['default'] = ['$rootScope', '$scope', 'RecipeService', MyRecipesController];
module.exports = exports['default'];

},{}],13:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _lodashDebounce = require('lodash.debounce');

var _lodashDebounce2 = _interopRequireDefault(_lodashDebounce);

function RecipeController($scope, RecipeService) {
    var _this = this;

    var recipesPerPage = 28;

    $scope.searchedRecipes = { status: -1 };

    function parsePagination(data, limit, offset) {
        var page = {
            buttons: [],
            pageCount: Math.ceil(data.matches / limit),
            currPage: Math.ceil(offset / limit)
        };

        for (var i = 0; i < page.pageCount; i++) {
            if (i === page.currPage) {
                page.buttons[i] = 'disabled';
            } else {
                page.buttons[i] = 'enabled';
            }
        }

        return page;
    }

    $scope.$watch('search.term', (0, _lodashDebounce2['default'])(function (term) {
        _this.getRecipes(0, term);
    }, 350));

    this.getRecipes = function () {
        var page = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];
        var searchTerm = arguments.length <= 1 || arguments[1] === undefined ? '%20' : arguments[1];

        var term = searchTerm;

        if (!term || term.length === 0) {
            term = '%20';
        }

        var offset = page * recipesPerPage;

        RecipeService.getSearch({ searchTerm: term, offset: offset }).then(function (response) {
            $scope.searchedRecipes = response;
            $scope.searchedRecipes.pagination = parsePagination(response.data, recipesPerPage, offset);
            return true;
        }, function () {
            $scope.searchedRecipes.status = 500;
            return false;
        });
    };

    $scope.getStars = function (numStars) {
        var stars = [true, true, false];

        for (var i = 0; i < numStars; i++) {
            stars.push(true);
        }
        for (var i = numStars; i < 5; i++) {
            stars.push(false);
        }
        return stars;
    };
}

exports['default'] = ['$scope', 'RecipeService', RecipeController];
module.exports = exports['default'];

},{"lodash.debounce":1}],14:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function RecipeStreamController($rootScope, $scope, RecipeService) {

    // Require user authentication.
    $rootScope.auth = $rootScope.auth || {};
    $rootScope.auth.required = true;

    $scope.$watch('recipeStream.currentIndex', function () {
        if ($scope.recipeStream.currentIndex > -1 && $scope.recipeStream.currentIndex < $scope.recipeStream.data.recipes.length) {
            $scope.recipeStream.current = $scope.recipeStream.data.recipes[$scope.recipeStream.currentIndex].id;
        } else {
            $scope.recipeStream.current = -1;
        }
    });

    $scope.getRecipeStream = function () {
        if ($scope.recipeStream && $scope.recipeStream.status === 200) {
            return true;
        }

        $scope.recipeStream = { status: -1, data: {} };
        RecipeService.getRecipeStream().then(function (response) {
            console.log(response);
            $scope.recipeStream = response;
            $scope.recipeStream.currentIndex = -1;

            // Trigger a variable change.
            $scope.recipeStream.currentIndex++;
            return true;
        }, function () {
            $scope.recipeStream.status = 500;
            return false;
        });
    };

    $scope.likeRecipe = function (id) {
        RecipeService.likeRecipe(id).then(function () {
            return true;
        }, function (err) {
            console.log('Error liking recipe: ' + JSON.stringify(err));
            return false;
        });
        $scope.recipeStream.currentIndex++;
    };

    $scope.dislikeRecipe = function (id) {
        console.log(id);
        $scope.recipeStream.currentIndex++;
    };
}

exports['default'] = ['$rootScope', '$scope', 'RecipeService', RecipeStreamController];
module.exports = exports['default'];

},{}],15:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function RecipeViewController($scope, $state, $stateParams, RecipeService) {
    $scope.getRecipe = function () {
        var recipeId = $stateParams.recipeId;

        $scope.recipe = { status: -1, data: {} };

        RecipeService.getRecipe(recipeId).then(function (response) {
            $scope.recipe.status = response.status;
            $scope.recipe.data = response.data;

            return response;
        })['catch'](function () {
            $scope.recipe.status = 500;
        });
    };

    $scope.favoriteRecipe = function () {
        $scope.recipe.data.favoritedLoading = true;
        RecipeService.favoriteRecipe($scope.recipe.data.id).then(function () {
            $scope.recipe.data.favorited = true;
        })['catch'](function (err) {
            console.log('Error favoriting recipe: ' + JSON.stringify(err));
        })['finally'](function () {
            $scope.recipe.data.favoritedLoading = false;
        });
    };

    $scope.markCompleted = function () {
        $scope.recipe.data.completedLoading = true;
        RecipeService.completeRecipe($scope.recipe.data.id).then(function () {
            $scope.recipe.data.completed = true;
        })['catch'](function (err) {
            console.log('Error completing recipe: ' + JSON.stringify(err));
        })['finally'](function () {
            $scope.recipe.data.completedLoading = false;
        });
    };

    $scope.markUnCompleted = function () {
        $scope.recipe.data.completedLoading = true;
        RecipeService.unCompleteRecipe($scope.recipe.data.id).then(function () {
            $scope.recipe.data.completed = false;
        })['catch'](function (err) {
            console.log('Error un-completed recipe: ' + JSON.stringify(err));
        })['finally'](function () {
            $scope.recipe.data.completedLoading = false;
        });
    };

    $scope.unFavoriteRecipe = function () {
        $scope.recipe.data.favoritedLoading = true;
        RecipeService.unFavoriteRecipe($scope.recipe.data.id).then(function () {
            $scope.recipe.data.favorited = false;
        })['catch'](function (err) {
            console.log('Error un-favoriting recipe: ' + JSON.stringify(err));
        })['finally'](function () {
            $scope.recipe.data.favoritedLoading = false;
        });
    };
}

exports['default'] = ['$scope', '$state', '$stateParams', 'RecipeService', RecipeViewController];
module.exports = exports['default'];

},{}],16:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function RecoveryController($scope, AuthService) {
    $scope.recoverSubmitting = false;
    $scope.recoverFormSuccess = false;

    $scope.sendRecoveryToken = function () {
        $scope.recoverForm = { general: {}, email: {} };
        $scope.recoverSubmitting = true;

        // Do some simple input validation.
        if (!$scope.account) {
            $scope.recoverForm.email.required = true;
            $scope.recoverSubmitting = false;
            return;
        }

        AuthService.forgotPassword($scope.account.email).then(function () {
            $scope.recoverFormSuccess = true;
            $scope.recoverSubmitting = false;
        })['catch'](function () {
            $scope.recoverForm.general.issue = true;
            $scope.recoverSubmitting = false;
        });
    };
}

exports['default'] = ['$scope', 'AuthService', RecoveryController];
module.exports = exports['default'];

},{}],17:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function RecoveryNewPasswordController($scope, $state, $stateParams, AuthService) {
    $scope.recoverSubmitting = false;
    $scope.recoverTokenValid = true;

    $scope.changePassword = function () {
        $scope.recoverForm = { general: {}, password: {}, confirm: {} };
        $scope.recoverSubmitting = true;

        // Do some simple input validation.
        if (!$scope.account || !$scope.account.password || $scope.account.password.length === 0) {
            $scope.recoverForm.password.required = true;
            $scope.recoverSubmitting = false;
            return;
        } else if ($scope.account.password !== $scope.account.confirm) {
            $scope.recoverForm.confirm.mismatch = true;
            $scope.recoverSubmitting = false;
            return;
        }

        AuthService.forgotPasswordConfirm($stateParams.token, $scope.account.password).then(function () {
            $scope.recoverSubmitting = false;

            // Redirect to homepage after recovering.
            $state.go('home');
        })['catch'](function () {
            $scope.recoverForm.general.issue = true;
            $scope.recoverSubmitting = false;
        });
    };
}

exports['default'] = ['$scope', '$state', '$stateParams', 'AuthService', RecoveryNewPasswordController];
module.exports = exports['default'];

},{}],18:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function RegistrationController($scope, $cookies, $state, AuthService) {
    $scope.registerSubmitting = false;

    $scope.register = function () {
        $scope.registerForm = { general: {}, email: {}, password: {}, confirm: {} };
        $scope.registerSubmitting = true;

        // Do some simple input validation.
        if (!$scope.account) {
            $scope.registerForm.general['no-input'] = true;
            $scope.registerSubmitting = false;
            return;
        } else if (!$scope.account.password || $scope.account.password.length === 0) {
            $scope.registerForm.password.required = true;
            $scope.registerSubmitting = false;
            return;
        } else if ($scope.account.password !== $scope.account.confirm) {
            $scope.registerForm.confirm.mismatch = true;
            $scope.registerSubmitting = false;
            return;
        }

        AuthService.register($scope.account.email, $scope.account.password).then(function (response) {

            // Log the user in.
            AuthService.login({ api_token: response.data.api_token }).then(function () {
                $state.go('home');
            });
        })['catch'](function () {
            $scope.registerForm.email.taken = true;
            $scope.registerSubmitting = false;
        });
    };
}

exports['default'] = ['$scope', '$cookies', '$state', 'AuthService', RegistrationController];
module.exports = exports['default'];

},{}],19:[function(require,module,exports){
'use strict';

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _bootstrap = require('../bootstrap');

var _MainController = require('./MainController');

var _MainController2 = _interopRequireDefault(_MainController);

var _HeaderController = require('./HeaderController');

var _HeaderController2 = _interopRequireDefault(_HeaderController);

var _FooterController = require('./FooterController');

var _FooterController2 = _interopRequireDefault(_FooterController);

var _HomeController = require('./HomeController');

var _HomeController2 = _interopRequireDefault(_HomeController);

var _LoginController = require('./LoginController');

var _LoginController2 = _interopRequireDefault(_LoginController);

var _AccountController = require('./AccountController');

var _AccountController2 = _interopRequireDefault(_AccountController);

var _MyRecipesController = require('./MyRecipesController');

var _MyRecipesController2 = _interopRequireDefault(_MyRecipesController);

var _MyIngredientsController = require('./MyIngredientsController');

var _MyIngredientsController2 = _interopRequireDefault(_MyIngredientsController);

var _RegistrationController = require('./RegistrationController');

var _RegistrationController2 = _interopRequireDefault(_RegistrationController);

var _RecoveryController = require('./RecoveryController');

var _RecoveryController2 = _interopRequireDefault(_RecoveryController);

var _RecoveryNewPasswordController = require('./RecoveryNewPasswordController');

var _RecoveryNewPasswordController2 = _interopRequireDefault(_RecoveryNewPasswordController);

var _RecipeController = require('./RecipeController');

var _RecipeController2 = _interopRequireDefault(_RecipeController);

var _RecipeViewController = require('./RecipeViewController');

var _RecipeViewController2 = _interopRequireDefault(_RecipeViewController);

var _RecipeStreamController = require('./RecipeStreamController');

var _RecipeStreamController2 = _interopRequireDefault(_RecipeStreamController);

_bootstrap.app.controller('MainController', _MainController2['default']);
_bootstrap.app.controller('HeaderController', _HeaderController2['default']);
_bootstrap.app.controller('FooterController', _FooterController2['default']);
_bootstrap.app.controller('HomeController', _HomeController2['default']);
_bootstrap.app.controller('LoginController', _LoginController2['default']);
_bootstrap.app.controller('AccountController', _AccountController2['default']);
_bootstrap.app.controller('MyRecipesController', _MyRecipesController2['default']);
_bootstrap.app.controller('MyIngredientsController', _MyIngredientsController2['default']);
_bootstrap.app.controller('RegistrationController', _RegistrationController2['default']);
_bootstrap.app.controller('RecoveryController', _RecoveryController2['default']);
_bootstrap.app.controller('RecoveryNewPasswordController', _RecoveryNewPasswordController2['default']);
_bootstrap.app.controller('RecipeController', _RecipeController2['default']);
_bootstrap.app.controller('RecipeViewController', _RecipeViewController2['default']);
_bootstrap.app.controller('RecipeStreamController', _RecipeStreamController2['default']);

},{"../bootstrap":4,"./AccountController":5,"./FooterController":6,"./HeaderController":7,"./HomeController":8,"./LoginController":9,"./MainController":10,"./MyIngredientsController":11,"./MyRecipesController":12,"./RecipeController":13,"./RecipeStreamController":14,"./RecipeViewController":15,"./RecoveryController":16,"./RecoveryNewPasswordController":17,"./RegistrationController":18}],20:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function FooterDirective() {
    return {
        templateUrl: 'templates/partials/footer.html',
        scope: true,
        controller: 'FooterController'
    };
}

exports['default'] = [FooterDirective];
module.exports = exports['default'];

},{}],21:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function HeaderDirective() {
    return {
        templateUrl: 'templates/partials/header.html',
        scope: true,
        controller: 'HeaderController'
    };
}

exports['default'] = [HeaderDirective];
module.exports = exports['default'];

},{}],22:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
exports.search = search;
exports.preview = preview;
exports.view = view;
exports.liked = liked;
exports.completed = completed;
exports.favorited = favorited;

function search() {
    return {
        templateUrl: 'templates/partials/recipe/recipe-search.html',
        scope: {
            searchTerm: '@'
        },
        controller: 'RecipeController',
        controllerAs: 'recipe'
    };
}

function preview() {
    return {
        templateUrl: 'templates/partials/recipe/recipe-preview.html',
        scope: true,
        link: function link(scope, element, attributes) {
            scope.recipe = JSON.parse(attributes.recipeData);
        }
    };
}

function view() {
    return {
        templateUrl: 'templates/partials/recipe/recipe-view.html',
        controller: 'RecipeViewController'
    };
}

function liked() {
    return {
        templateUrl: 'templates/partials/recipe/recipe-liked.html',
        scope: true,
        controller: 'MyRecipesController'
    };
}

function completed() {
    return {
        templateUrl: 'templates/partials/recipe/recipe-completed.html',
        scope: true,
        controller: 'MyRecipesController'
    };
}

function favorited() {
    return {
        templateUrl: 'templates/partials/recipe/recipe-favorited.html',
        scope: true,
        controller: 'MyRecipesController'
    };
}

},{}],23:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function UnauthorizedDirective() {
    return {
        templateUrl: 'templates/partials/unauthorized.html',
        scope: true
    };
}

exports['default'] = [UnauthorizedDirective];
module.exports = exports['default'];

},{}],24:[function(require,module,exports){
'use strict';

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _bootstrap = require('../bootstrap');

var _HeaderDirective = require('./HeaderDirective');

var _HeaderDirective2 = _interopRequireDefault(_HeaderDirective);

var _FooterDirective = require('./FooterDirective');

var _FooterDirective2 = _interopRequireDefault(_FooterDirective);

var _UnauthorizedDirective = require('./UnauthorizedDirective');

var _UnauthorizedDirective2 = _interopRequireDefault(_UnauthorizedDirective);

var _RecipeDirective = require('./RecipeDirective');

_bootstrap.app.directive('header', _HeaderDirective2['default']);
_bootstrap.app.directive('footer', _FooterDirective2['default']);
_bootstrap.app.directive('unauthorized', _UnauthorizedDirective2['default']);
_bootstrap.app.directive('recipepreview', _RecipeDirective.preview);
_bootstrap.app.directive('recipesearch', _RecipeDirective.search);
_bootstrap.app.directive('recipeview', _RecipeDirective.view);
_bootstrap.app.directive('recipesliked', _RecipeDirective.liked);
_bootstrap.app.directive('recipescompleted', _RecipeDirective.completed);
_bootstrap.app.directive('recipesfavorited', _RecipeDirective.favorited);

},{"../bootstrap":4,"./FooterDirective":20,"./HeaderDirective":21,"./RecipeDirective":22,"./UnauthorizedDirective":23}],25:[function(require,module,exports){
'use strict';

var _bootstrap = require('./bootstrap');

_bootstrap.app.config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {
    $urlRouterProvider.otherwise('/');

    $stateProvider.state('home', {
        url: '/',
        templateUrl: 'templates/home.html',
        controller: 'HomeController'
    }).state('account', {
        url: '/account/',
        templateUrl: 'templates/account.html',
        controller: 'AccountController'
    }).state('my-recipes', {
        url: '/account/recipes/',
        templateUrl: 'templates/my-recipes.html',
        controller: 'MyRecipesController'
    }).state('my-ingredients', {
        url: '/account/ingredients/',
        templateUrl: 'templates/my-ingredients.html',
        controller: 'MyIngredientsController'
    }).state('register', {
        url: '/register/',
        templateUrl: 'templates/register.html',
        controller: 'RegistrationController'
    }).state('forgot-password', {
        url: '/forgot-password/',
        templateUrl: 'templates/forgot-password.html',
        controller: 'RecoveryController'
    }).state('forgot-password-token', {
        url: '/forgot-password/:token',
        templateUrl: 'templates/forgot-password-token.html',
        controller: 'RecoveryNewPasswordController'
    }).state('recipes', {
        url: '/recipes/',
        templateUrl: 'templates/recipes.html',
        controller: 'RecipeController'
    }).state('recipeView', {
        url: '/recipes/recipe/:recipeId/',
        templateUrl: 'templates/recipe.html',
        controller: 'RecipeViewController'
    }).state('recipeStream', {
        url: '/recipes/recipeStream/',
        templateUrl: 'templates/recipe-stream.html',
        controller: 'RecipeStreamController'
    });
}]);

},{"./bootstrap":4}],26:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function AuthService($http, $localStorage, $sessionStorage, $mdDialog) {
    var currentUser = undefined;
    var modalIsOpen = false;
    var modal = undefined;

    return {
        register: function register(email, password) {
            return $http.post('http://api.kitchen.support/accounts/create', {
                email: email,
                password: password
            });
        },
        login: function login(args) {
            if (args.email && args.email.length > 0 && (args.password && args.password.length > 0)) {
                return $http.post('http://api.kitchen.support/accounts/login', {
                    email: args.email,
                    password: args.password
                }).then(function (response) {
                    currentUser = response.data;

                    // Store user info in cookies.
                    if (args.remember) {
                        $localStorage.ksLoginToken = response.data.api_token;
                    } else {
                        $sessionStorage.ksLoginToken = response.data.api_token;
                    }
                });
            } else if (args.api_token && args.api_token.length > 0) {
                return $http.get('http://api.kitchen.support/account?api_token=' + args.api_token).then(function (response) {
                    currentUser = response.data;

                    // Store user info in cookies.
                    if (args.remember) {
                        $localStorage.ksLoginToken = response.data.api_token;
                    } else {
                        $sessionStorage.ksLoginToken = response.data.api_token;
                    }
                });
            }
        },
        logout: function logout() {
            currentUser = undefined;
            delete $localStorage.ksLoginToken;
            delete $sessionStorage.ksLoginToken;
        },
        forgotPassword: function forgotPassword(email) {
            return $http.post('http://api.kitchen.support/accounts/reset/request', {
                email: email
            });
        },
        forgotPasswordConfirm: function forgotPasswordConfirm(resetToken, password) {
            return $http.post('http://api.kitchen.support/accounts/reset/confirm', {
                reset_token: resetToken,
                password: password
            });
        },
        getCurrentUser: function getCurrentUser() {
            return currentUser;
        },
        getApiToken: function getApiToken() {
            if (currentUser) {
                return currentUser.api_token;
            }

            return '';
        },

        // login modal functions
        loginModal: {
            open: function open($event) {
                modalIsOpen = true;
                $mdDialog.show({
                    templateUrl: 'templates/login-modal.html',
                    controller: 'LoginController',
                    clickOutsideToClose: true,
                    targetEvent: $event,
                    onRemoving: function onRemoving() {
                        modalIsOpen = false;
                    }
                });
            },
            close: function close() {
                if (modalIsOpen) {
                    $mdDialog.hide(modal);
                }
            },
            getModal: function getModal() {
                return modal;
            },
            isOpen: function isOpen() {
                return modalIsOpen;
            }
        }
    };
}

exports['default'] = ['$http', '$localStorage', '$sessionStorage', '$mdDialog', AuthService];
module.exports = exports['default'];

},{}],27:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function parseIngredients(promise) {
    return promise.then(function (response) {

        var request = response.config.url.split('?')[1].split('&');

        var params = {};

        request.forEach(function (param) {
            var paramData = param.split('=');

            params[paramData[0]] = paramData[1];
        });

        response.data.params = params;
        if (params.offset && params.limit) {
            response.data.range = params.offset + ' - ' + (+params.offset + +params.limit);
        }

        return response;
    });
}

function RecipeService($http, $q, AuthService) {
    return {
        getSearch: function getSearch(params) {
            var searchTerm = params.searchTerm;
            var _params$limit = params.limit;
            var limit = _params$limit === undefined ? 28 : _params$limit;
            var _params$offset = params.offset;
            var offset = _params$offset === undefined ? 0 : _params$offset;

            var token = AuthService.getApiToken();

            if (token) {
                return $http.get('http://api.kitchen.support/ingredients/' + searchTerm + '?limit=' + limit + '&offset=' + offset + '&api_token=' + token);
            } else {
                return $http.get('http://api.kitchen.support/ingredients/' + searchTerm + '?limit=' + limit + '&offset=' + offset);
            }
        },
        getIngredients: function getIngredients() {
            var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];
            var _params$limit2 = params.limit;
            var limit = _params$limit2 === undefined ? 30 : _params$limit2;
            var _params$offset2 = params.offset;
            var offset = _params$offset2 === undefined ? 0 : _params$offset2;

            return parseIngredients($http.get('http://api.kitchen.support/ingredients?limit=' + limit + '&offset=' + offset));
        },
        getPantry: function getPantry() {
            var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];
            var _params$limit3 = params.limit;
            var limit = _params$limit3 === undefined ? 30 : _params$limit3;
            var _params$offset3 = params.offset;
            var offset = _params$offset3 === undefined ? 0 : _params$offset3;

            return parseIngredients($http.get('http://api.kitchen.support/pantry?api_token=' + AuthService.getApiToken() + '&limit=' + limit + '&offset=' + offset));
        },
        addPantry: function addPantry(ingredientId) {
            return $http.post('http://api.kitchen.support/pantry', { api_token: AuthService.getApiToken(), ingredient_id: ingredientId });
        },
        removePantry: function removePantry(ingredientId) {
            return $http.post('http://api.kitchen.support/pantry', { api_token: AuthService.getApiToken(), ingredient_id: ingredientId, value: false });
        }
    };
}

exports['default'] = ['$http', '$q', 'AuthService', RecipeService];
module.exports = exports['default'];

},{}],28:[function(require,module,exports){

// Parse an array of recipes.
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});
function parseRecipeArray(promise) {
    return promise.then(function (response) {
        response.data.recipes = response.data.recipes || response.data.likes || {};
        if (response && response.status === 200) {
            if (response.data.recipes && response.data.recipes.length > 0) {
                response.data.recipes.forEach(function (part, recipe, recipes) {
                    recipes[recipe].url = 'recipeView({\'recipeId\': \'' + recipes[recipe].yummly_id + '\'})';

                    if (recipes[recipe].totalTimeInSeconds && recipes[recipe].totalTimeInSeconds > 1) {
                        recipes[recipe].totalTimeString = recipes[recipe].totalTimeInSeconds / 60 + ' minutes';
                    }

                    recipes[recipe].ratingArray = [];

                    // TODO: 'no recipe found' image.
                    if (recipes[recipe].smallImageUrls && recipes[recipe].smallImageUrls.length > 0) {
                        recipes[recipe].imageUrl = recipes[recipe].smallImageUrls[0].split('=')[0] + '=s360';
                    }
                    for (var i = 0; i < recipes[recipe].rating; i++) {
                        recipes[recipe].ratingArray.push(true);
                    }
                    for (var i = recipes[recipe].rating; i < 5; i++) {
                        recipes[recipe].ratingArray.push(false);
                    }
                });
            }
        }

        return response;
    });
}

// Parse an individual recipe.
function parseRecipe(promise) {
    return promise.then(function (response) {
        if (response.data.totalTimeInSeconds && response.data.totalTimeInSeconds > 1) {
            response.data.totalTimeString = response.data.totalTimeInSeconds / 60 + ' minutes';
        }
        response.data.ratingArray = [];
        for (var i = 0; i < response.data.rating; i++) {
            response.data.ratingArray.push(true);
        }
        for (var i = response.data.rating; i < 5; i++) {
            response.data.ratingArray.push(false);
        }

        response.data.imageUrl = response.data.imageUrlsBySize[Object.keys(response.data.imageUrlsBySize)[0]].split('=')[0] + '=s750';
        return response;
    });
}

function RecipeService($http, $q, AuthService) {
    return {
        getRecipeStream: function getRecipeStream() {
            return parseRecipeArray($http.get('http://api.kitchen.support/stream'));
        },
        getSearch: function getSearch(params) {
            var searchTerm = params.searchTerm;
            var _params$limit = params.limit;
            var limit = _params$limit === undefined ? 28 : _params$limit;
            var _params$offset = params.offset;
            var offset = _params$offset === undefined ? 0 : _params$offset;

            var token = AuthService.getApiToken();

            if (token) {
                return parseRecipeArray($http.get('http://api.kitchen.support/recipes/search/' + searchTerm + '?limit=' + limit + '&offset=' + offset + '&api_token=' + token));
            } else {
                return parseRecipeArray($http.get('http://api.kitchen.support/recipes/search/' + searchTerm + '?limit=' + limit + '&offset=' + offset));
            }
        },
        getRecipe: function getRecipe(recipeId) {
            var token = AuthService.getApiToken();

            if (token) {
                return parseRecipe($http.get('http://api.kitchen.support/recipe?yummly_id=' + recipeId + '&api_token=' + token));
            } else {
                return parseRecipe($http.get('http://api.kitchen.support/recipe?yummly_id=' + recipeId));
            }
        },
        favoriteRecipe: function favoriteRecipe(recipeId) {
            return $http.post('http://api.kitchen.support/favorites', { api_token: AuthService.getApiToken(), recipe_id: recipeId });
        },
        unFavoriteRecipe: function unFavoriteRecipe(recipeId) {
            return $http.post('http://api.kitchen.support/favorites', { api_token: AuthService.getApiToken(), recipe_id: recipeId, value: false });
        },
        likeRecipe: function likeRecipe(recipeId) {
            return $http.post('http://api.kitchen.support/likes', { api_token: AuthService.getApiToken(), recipe_id: recipeId });
        },
        completeRecipe: function completeRecipe(recipeId) {
            return $http.post('http://api.kitchen.support/completed', { api_token: AuthService.getApiToken(), recipe_id: recipeId });
        },
        unLikeRecipe: function unLikeRecipe(recipeId) {
            return $http.post('http://api.kitchen.support/likes', { api_token: AuthService.getApiToken(), recipe_id: recipeId, value: false });
        },
        unCompleteRecipe: function unCompleteRecipe(recipeId) {
            return $http.post('http://api.kitchen.support/completed', { api_token: AuthService.getApiToken(), recipe_id: recipeId, value: false });
        },
        getLiked: function getLiked() {
            return parseRecipeArray($http.get('http://api.kitchen.support/likes?api_token=' + AuthService.getApiToken()));
        },
        getFavorited: function getFavorited() {
            return parseRecipeArray($http.get('http://api.kitchen.support/favorites?api_token=' + AuthService.getApiToken()));
        },
        getCompleted: function getCompleted() {
            return parseRecipeArray($http.get('http://api.kitchen.support/completed?api_token=' + AuthService.getApiToken()));
        },
        getRecipeStream: function getRecipeStream() {
            return parseRecipeArray($http.get('http://api.kitchen.support/stream?api_token=' + AuthService.getApiToken()));
        }
    };
}

exports['default'] = ['$http', '$q', 'AuthService', RecipeService];
module.exports = exports['default'];

},{}],29:[function(require,module,exports){
'use strict';

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _bootstrap = require('../bootstrap');

var _AuthService = require('./AuthService');

var _AuthService2 = _interopRequireDefault(_AuthService);

var _RecipeService = require('./RecipeService');

var _RecipeService2 = _interopRequireDefault(_RecipeService);

var _IngredientService = require('./IngredientService');

var _IngredientService2 = _interopRequireDefault(_IngredientService);

_bootstrap.app.factory('AuthService', _AuthService2['default']);
_bootstrap.app.factory('RecipeService', _RecipeService2['default']);
_bootstrap.app.factory('IngredientService', _IngredientService2['default']);

},{"../bootstrap":4,"./AuthService":26,"./IngredientService":27,"./RecipeService":28}],30:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
var appName = 'ksapp';
exports.appName = appName;

},{}]},{},[3])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC5kZWJvdW5jZS9ub2RlX21vZHVsZXMvbG9kYXNoLl9nZXRuYXRpdmUvaW5kZXguanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9hcHAuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9ib290c3RyYXAuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9jb250cm9sbGVycy9BY2NvdW50Q29udHJvbGxlci5qcyIsIi9ob21lL3VidW50dS93ZWJhcHAvc3JjL2pzL2NvbnRyb2xsZXJzL0Zvb3RlckNvbnRyb2xsZXIuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9jb250cm9sbGVycy9IZWFkZXJDb250cm9sbGVyLmpzIiwiL2hvbWUvdWJ1bnR1L3dlYmFwcC9zcmMvanMvY29udHJvbGxlcnMvSG9tZUNvbnRyb2xsZXIuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9jb250cm9sbGVycy9Mb2dpbkNvbnRyb2xsZXIuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9jb250cm9sbGVycy9NYWluQ29udHJvbGxlci5qcyIsIi9ob21lL3VidW50dS93ZWJhcHAvc3JjL2pzL2NvbnRyb2xsZXJzL015SW5ncmVkaWVudHNDb250cm9sbGVyLmpzIiwiL2hvbWUvdWJ1bnR1L3dlYmFwcC9zcmMvanMvY29udHJvbGxlcnMvTXlSZWNpcGVzQ29udHJvbGxlci5qcyIsIi9ob21lL3VidW50dS93ZWJhcHAvc3JjL2pzL2NvbnRyb2xsZXJzL1JlY2lwZUNvbnRyb2xsZXIuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9jb250cm9sbGVycy9SZWNpcGVTdHJlYW1Db250cm9sbGVyLmpzIiwiL2hvbWUvdWJ1bnR1L3dlYmFwcC9zcmMvanMvY29udHJvbGxlcnMvUmVjaXBlVmlld0NvbnRyb2xsZXIuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9jb250cm9sbGVycy9SZWNvdmVyeUNvbnRyb2xsZXIuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9jb250cm9sbGVycy9SZWNvdmVyeU5ld1Bhc3N3b3JkQ29udHJvbGxlci5qcyIsIi9ob21lL3VidW50dS93ZWJhcHAvc3JjL2pzL2NvbnRyb2xsZXJzL1JlZ2lzdHJhdGlvbkNvbnRyb2xsZXIuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9jb250cm9sbGVycy9pbmRleC5qcyIsIi9ob21lL3VidW50dS93ZWJhcHAvc3JjL2pzL2RpcmVjdGl2ZXMvRm9vdGVyRGlyZWN0aXZlLmpzIiwiL2hvbWUvdWJ1bnR1L3dlYmFwcC9zcmMvanMvZGlyZWN0aXZlcy9IZWFkZXJEaXJlY3RpdmUuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9kaXJlY3RpdmVzL1JlY2lwZURpcmVjdGl2ZS5qcyIsIi9ob21lL3VidW50dS93ZWJhcHAvc3JjL2pzL2RpcmVjdGl2ZXMvVW5hdXRob3JpemVkRGlyZWN0aXZlLmpzIiwiL2hvbWUvdWJ1bnR1L3dlYmFwcC9zcmMvanMvZGlyZWN0aXZlcy9pbmRleC5qcyIsIi9ob21lL3VidW50dS93ZWJhcHAvc3JjL2pzL3JvdXRlcy5qcyIsIi9ob21lL3VidW50dS93ZWJhcHAvc3JjL2pzL3NlcnZpY2VzL0F1dGhTZXJ2aWNlLmpzIiwiL2hvbWUvdWJ1bnR1L3dlYmFwcC9zcmMvanMvc2VydmljZXMvSW5ncmVkaWVudFNlcnZpY2UuanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy9zZXJ2aWNlcy9SZWNpcGVTZXJ2aWNlLmpzIiwiL2hvbWUvdWJ1bnR1L3dlYmFwcC9zcmMvanMvc2VydmljZXMvaW5kZXguanMiLCIvaG9tZS91YnVudHUvd2ViYXBwL3NyYy9qcy91dGlscy9jb25zdGFudHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QkFBaUI7Ozs7aUNBQ2IscUJBQXFCOzs7O0FBRW5ELGVBQUksT0FBTyxDQUFDLGFBQWEsMkJBQWMsQ0FBQztBQUN4QyxlQUFJLE9BQU8sQ0FBQyxlQUFlLDZCQUFnQixDQUFDO0FBQzVDLGVBQUksT0FBTyxDQUFDLG1CQUFtQixpQ0FBb0IsQ0FBQzs7Ozs7Ozs7QUNSN0MsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKlxuICogbG9kYXNoIDMuMS4xIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG52YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnbG9kYXNoLl9nZXRuYXRpdmUnKTtcblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTm93ID0gZ2V0TmF0aXZlKERhdGUsICdub3cnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBVbml4IGVwb2NoXG4gKiAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IERhdGVcbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBsb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBmdW5jdGlvbiB0byBiZSBpbnZva2VkXG4gKi9cbnZhciBub3cgPSBuYXRpdmVOb3cgfHwgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAqIGRlbGF5ZWQgaW52b2NhdGlvbnMuIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGUgdGhhdCBgZnVuY2BcbiAqIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqIFN1YnNlcXVlbnQgY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdFxuICogYGZ1bmNgIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpcyBpbnZva2VkXG4gKiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGlzXG4gKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHA6Ly9kcnVwYWxtb3Rpb24uY29tL2FydGljbGUvZGVib3VuY2UtYW5kLXRocm90dGxlLXZpc3VhbC1leHBsYW5hdGlvbilcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV0gU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZ1xuICogIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF0gVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZVxuICogIGRlbGF5ZWQgYmVmb3JlIGl0IGlzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nXG4gKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gYXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eFxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBpbnZva2UgYHNlbmRNYWlsYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzXG4gKiBqUXVlcnkoJyNwb3N0Ym94Jykub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBlbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzXG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwge1xuICogICAnbWF4V2FpdCc6IDEwMDBcbiAqIH0pKTtcbiAqXG4gKiAvLyBjYW5jZWwgYSBkZWJvdW5jZWQgY2FsbFxuICogdmFyIHRvZG9DaGFuZ2VzID0gXy5kZWJvdW5jZShiYXRjaExvZywgMTAwMCk7XG4gKiBPYmplY3Qub2JzZXJ2ZShtb2RlbHMudG9kbywgdG9kb0NoYW5nZXMpO1xuICpcbiAqIE9iamVjdC5vYnNlcnZlKG1vZGVscywgZnVuY3Rpb24oY2hhbmdlcykge1xuICogICBpZiAoXy5maW5kKGNoYW5nZXMsIHsgJ3VzZXInOiAndG9kbycsICd0eXBlJzogJ2RlbGV0ZSd9KSkge1xuICogICAgIHRvZG9DaGFuZ2VzLmNhbmNlbCgpO1xuICogICB9XG4gKiB9LCBbJ2RlbGV0ZSddKTtcbiAqXG4gKiAvLyAuLi5hdCBzb21lIHBvaW50IGBtb2RlbHMudG9kb2AgaXMgY2hhbmdlZFxuICogbW9kZWxzLnRvZG8uY29tcGxldGVkID0gdHJ1ZTtcbiAqXG4gKiAvLyAuLi5iZWZvcmUgMSBzZWNvbmQgaGFzIHBhc3NlZCBgbW9kZWxzLnRvZG9gIGlzIGRlbGV0ZWRcbiAqIC8vIHdoaWNoIGNhbmNlbHMgdGhlIGRlYm91bmNlZCBgdG9kb0NoYW5nZXNgIGNhbGxcbiAqIGRlbGV0ZSBtb2RlbHMudG9kbztcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgYXJncyxcbiAgICAgIG1heFRpbWVvdXRJZCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHN0YW1wLFxuICAgICAgdGhpc0FyZyxcbiAgICAgIHRpbWVvdXRJZCxcbiAgICAgIHRyYWlsaW5nQ2FsbCxcbiAgICAgIGxhc3RDYWxsZWQgPSAwLFxuICAgICAgbWF4V2FpdCA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB3YWl0IDwgMCA/IDAgOiAoK3dhaXQgfHwgMCk7XG4gIGlmIChvcHRpb25zID09PSB0cnVlKSB7XG4gICAgdmFyIGxlYWRpbmcgPSB0cnVlO1xuICAgIHRyYWlsaW5nID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4V2FpdCA9ICdtYXhXYWl0JyBpbiBvcHRpb25zICYmIG5hdGl2ZU1heCgrb3B0aW9ucy5tYXhXYWl0IHx8IDAsIHdhaXQpO1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxuICAgIGlmIChtYXhUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO1xuICAgIH1cbiAgICBsYXN0Q2FsbGVkID0gMDtcbiAgICBtYXhUaW1lb3V0SWQgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wbGV0ZShpc0NhbGxlZCwgaWQpIHtcbiAgICBpZiAoaWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgfVxuICAgIG1heFRpbWVvdXRJZCA9IHRpbWVvdXRJZCA9IHRyYWlsaW5nQ2FsbCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoaXNDYWxsZWQpIHtcbiAgICAgIGxhc3RDYWxsZWQgPSBub3coKTtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICBpZiAoIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XG4gICAgICAgIGFyZ3MgPSB0aGlzQXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGF5ZWQoKSB7XG4gICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93KCkgLSBzdGFtcCk7XG4gICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcbiAgICAgIGNvbXBsZXRlKHRyYWlsaW5nQ2FsbCwgbWF4VGltZW91dElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChkZWxheWVkLCByZW1haW5pbmcpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1heERlbGF5ZWQoKSB7XG4gICAgY29tcGxldGUodHJhaWxpbmcsIHRpbWVvdXRJZCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICBzdGFtcCA9IG5vdygpO1xuICAgIHRoaXNBcmcgPSB0aGlzO1xuICAgIHRyYWlsaW5nQ2FsbCA9IHRyYWlsaW5nICYmICh0aW1lb3V0SWQgfHwgIWxlYWRpbmcpO1xuXG4gICAgaWYgKG1heFdhaXQgPT09IGZhbHNlKSB7XG4gICAgICB2YXIgbGVhZGluZ0NhbGwgPSBsZWFkaW5nICYmICF0aW1lb3V0SWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghbWF4VGltZW91dElkICYmICFsZWFkaW5nKSB7XG4gICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgIH1cbiAgICAgIHZhciByZW1haW5pbmcgPSBtYXhXYWl0IC0gKHN0YW1wIC0gbGFzdENhbGxlZCksXG4gICAgICAgICAgaXNDYWxsZWQgPSByZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiBtYXhXYWl0O1xuXG4gICAgICBpZiAoaXNDYWxsZWQpIHtcbiAgICAgICAgaWYgKG1heFRpbWVvdXRJZCkge1xuICAgICAgICAgIG1heFRpbWVvdXRJZCA9IGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKCFtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgbWF4VGltZW91dElkID0gc2V0VGltZW91dChtYXhEZWxheWVkLCByZW1haW5pbmcpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNDYWxsZWQgJiYgdGltZW91dElkKSB7XG4gICAgICB0aW1lb3V0SWQgPSBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIXRpbWVvdXRJZCAmJiB3YWl0ICE9PSBtYXhXYWl0KSB7XG4gICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsIHdhaXQpO1xuICAgIH1cbiAgICBpZiAobGVhZGluZ0NhbGwpIHtcbiAgICAgIGlzQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgfVxuICAgIGlmIChpc0NhbGxlZCAmJiAhdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpIHtcbiAgICAgIGFyZ3MgPSB0aGlzQXJnID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG4iLCIvKipcbiAqIGxvZGFzaCAzLjkuMSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpID4gNSkuICovXG52YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZuVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG52YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICBmblRvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpLnJlcGxhY2UoL1tcXFxcXiQuKis/KClbXFxde318XS9nLCAnXFxcXCQmJylcbiAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG4pO1xuXG4vKipcbiAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcbiAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgcmV0dXJuIGlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Z1bmN0aW9uKF8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAvLyBpbiBvbGRlciB2ZXJzaW9ucyBvZiBDaHJvbWUgYW5kIFNhZmFyaSB3aGljaCByZXR1cm4gJ2Z1bmN0aW9uJyBmb3IgcmVnZXhlc1xuICAvLyBhbmQgU2FmYXJpIDggZXF1aXZhbGVudHMgd2hpY2ggcmV0dXJuICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvcnMuXG4gIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZnVuY1RhZztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdCgxKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG4gIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc05hdGl2ZShBcnJheS5wcm90b3R5cGUucHVzaCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc05hdGl2ZShfKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTmF0aXZlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgIHJldHVybiByZUlzTmF0aXZlLnRlc3QoZm5Ub1N0cmluZy5jYWxsKHZhbHVlKSk7XG4gIH1cbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgcmVJc0hvc3RDdG9yLnRlc3QodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE5hdGl2ZTtcbiIsImltcG9ydCAnLi9ib290c3RyYXAnO1xuaW1wb3J0ICcuL3JvdXRlcyc7XG5pbXBvcnQgJy4vc2VydmljZXMnO1xuaW1wb3J0ICcuL2NvbnRyb2xsZXJzJztcbmltcG9ydCAnLi9kaXJlY3RpdmVzJztcbiIsImltcG9ydCBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHthcHBOYW1lfSBmcm9tICcuL3V0aWxzL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBjb25zdCBhcHAgPSBhbmd1bGFyLm1vZHVsZShhcHBOYW1lLCBbJ25nTWF0ZXJpYWwnLCAnbmdNZXNzYWdlcycsICduZ0Nvb2tpZXMnLCAnbmdTdG9yYWdlJywgJ3VpLnJvdXRlciddKTtcbiIsImZ1bmN0aW9uIEFjY291bnRDb250cm9sbGVyKCRzY29wZSkge1xuXG4gICAgLy8gUmVxdWlyZSB1c2VyIGF1dGhlbnRpY2F0aW9uLlxuICAgICRzY29wZS5hdXRoID0gJHNjb3BlLmF1dGggfHwge307XG4gICAgJHNjb3BlLmF1dGgucmVxdWlyZWQgPSB0cnVlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBbJyRzY29wZScsIEFjY291bnRDb250cm9sbGVyXTtcbiIsImZ1bmN0aW9uIEZvb3RlckNvbnRyb2xsZXIoKSB7fVxuXG5leHBvcnQgZGVmYXVsdCBbRm9vdGVyQ29udHJvbGxlcl07XG4iLCJmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCRzY29wZSkge1xuICAgICRzY29wZS5vcGVuTWVudSA9ICgkbWRPcGVuTWVudSwgZXYpID0+IHtcbiAgICAgICAgJG1kT3Blbk1lbnUoZXYpO1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFsnJHNjb3BlJywgSGVhZGVyQ29udHJvbGxlcl07XG4iLCJmdW5jdGlvbiBIb21lQ29udHJvbGxlcigpIHt9XG5cbmV4cG9ydCBkZWZhdWx0IFtIb21lQ29udHJvbGxlcl07XG4iLCJmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIoJHNjb3BlLCAkcm9vdFNjb3BlLCAkaHR0cCwgJHN0YXRlLCAkbWREaWFsb2csIEF1dGhTZXJ2aWNlKSB7XG4gICAgJHNjb3BlLmxvZ2luU3VibWl0dGluZyA9IGZhbHNlO1xuXG4gICAgJHNjb3BlLmxvZ2luID0gKCkgPT4ge1xuICAgICAgICAkc2NvcGUubG9naW5TdWJtaXR0aW5nID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmxvZ2luRm9ybSA9IHtnZW5lcmFsOiB7fSwgZW1haWw6IHt9LCBwYXNzd29yZDoge319O1xuXG4gICAgICAgIC8vIERvIHNvbWUgc2ltcGxlIGlucHV0IHZhbGlkYXRpb24uXG4gICAgICAgIGlmICghJHNjb3BlLmFjY291bnQpIHtcbiAgICAgICAgICAgICRzY29wZS5sb2dpbkZvcm0uZ2VuZXJhbFsnbm8taW5wdXQnXSA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUubG9naW5TdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoISRzY29wZS5hY2NvdW50LnBhc3N3b3JkIHx8ICRzY29wZS5hY2NvdW50LnBhc3N3b3JkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luRm9ybS5wYXNzd29yZC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUubG9naW5TdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBBdXRoU2VydmljZS5sb2dpbih7ZW1haWw6ICRzY29wZS5hY2NvdW50LmVtYWlsLCBwYXNzd29yZDogJHNjb3BlLmFjY291bnQucGFzc3dvcmQsIHJlbWVtYmVyOiAkc2NvcGUuYWNjb3VudC5yZW1lbWJlcn0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFBdXRoU2VydmljZS5sb2dpbk1vZGFsLmlzT3BlbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UncmUgbG9nZ2luZyBpbiB0aHJvdWdoIHRoZSBtb2RhbCwgZG9uJ3QgcmVkaXJlY3QuXG4gICAgICAgICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmxvZ2luTW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9naW5Gb3JtLmdlbmVyYWwuaW5jb3JyZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2luU3VibWl0dGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5vcGVuTG9naW5Nb2RhbCA9ICgkZXZlbnQpID0+IHtcbiAgICAgICAgQXV0aFNlcnZpY2UubG9naW5Nb2RhbC5vcGVuKCRldmVudCk7XG4gICAgfTtcblxuICAgICRzY29wZS5jbG9zZUxvZ2luTW9kYWwgPSAoKSA9PiB7XG4gICAgICAgIEF1dGhTZXJ2aWNlLmxvZ2luTW9kYWwuY2xvc2UoKTtcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBbJyRzY29wZScsICckcm9vdFNjb3BlJywgJyRodHRwJywgJyRzdGF0ZScsICckbWREaWFsb2cnLCAnQXV0aFNlcnZpY2UnLCBMb2dpbkNvbnRyb2xsZXJdO1xuIiwiZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoJHJvb3RTY29wZSwgJGxvY2FsU3RvcmFnZSwgJHNlc3Npb25TdG9yYWdlLCBBdXRoU2VydmljZSkge1xuICAgICRyb290U2NvcGUubW9kYWxzID0ge307XG4gICAgJHJvb3RTY29wZS5hdXRoID0ge307XG4gICAgJHJvb3RTY29wZS5hdXRoLmxvZ291dCA9IEF1dGhTZXJ2aWNlLmxvZ291dDtcblxuICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsICgpID0+IHtcbiAgICAgICAgJHJvb3RTY29wZS5hdXRoLnJlcXVpcmVkID0gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlcmUncyBhIHRva2VuIGluIHN0b3JhZ2Ugc29tZXdoZXJlLlxuICAgIGlmICghQXV0aFNlcnZpY2UuZ2V0Q3VycmVudFVzZXIoKSkge1xuICAgICAgICBpZiAoJGxvY2FsU3RvcmFnZS5rc0xvZ2luVG9rZW4gIT09IHVuZGVmaW5lZCAmJiAkbG9jYWxTdG9yYWdlLmtzTG9naW5Ub2tlbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmxvZ2luKHthcGlfdG9rZW46ICRsb2NhbFN0b3JhZ2Uua3NMb2dpblRva2VufSk7XG4gICAgICAgIH0gZWxzZSBpZiAoJHNlc3Npb25TdG9yYWdlLmtzTG9naW5Ub2tlbiAhPT0gdW5kZWZpbmVkICYmICRzZXNzaW9uU3RvcmFnZS5rc0xvZ2luVG9rZW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBBdXRoU2VydmljZS5sb2dpbih7YXBpX3Rva2VuOiAkc2Vzc2lvblN0b3JhZ2Uua3NMb2dpblRva2VufSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIHNjb3BlIHdoZW5ldmVyIHVzZXIgaW5mb3JtYXRpb24gY2hhbmdlcy5cbiAgICAkcm9vdFNjb3BlLiR3YXRjaChBdXRoU2VydmljZS5nZXRDdXJyZW50VXNlciwgKHVzZXIpID0+IHtcbiAgICAgICAgJHJvb3RTY29wZS5hdXRoLnVzZXIgPSB1c2VyO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBbJyRyb290U2NvcGUnLCAnJGxvY2FsU3RvcmFnZScsICckc2Vzc2lvblN0b3JhZ2UnLCAnQXV0aFNlcnZpY2UnLCBNYWluQ29udHJvbGxlcl07XG4iLCJpbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoLmRlYm91bmNlJztcblxuZnVuY3Rpb24gTXlJbmdyZWRpZW50c0NvbnRyb2xsZXIoJHJvb3RTY29wZSwgJHNjb3BlLCBJbmdyZWRpZW50U2VydmljZSkge1xuXG4gICAgLy8gUmVxdWlyZSB1c2VyIGF1dGhlbnRpY2F0aW9uLlxuICAgICRyb290U2NvcGUuYXV0aCA9ICRyb290U2NvcGUuYXV0aCB8fCB7fTtcbiAgICAkcm9vdFNjb3BlLmF1dGgucmVxdWlyZWQgPSB0cnVlO1xuXG4gICAgY29uc3QgaW5ncmVkaWVudHNQZXJQYWdlID0gMTU7XG5cbiAgICAkc2NvcGUuc2VhcmNoZWRJbmdyZWRpZW50cyA9IHtzdGF0dXM6IC0xfTtcbiAgICAkc2NvcGUucGFudHJ5ID0ge3N0YXR1czogLTEsIGRhdGE6IHt9fTtcblxuICAgIGZ1bmN0aW9uIHBhcnNlUGFnaW5hdGlvbihkYXRhLCBsaW1pdCwgb2Zmc2V0KSB7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSB7XG4gICAgICAgICAgICBidXR0b25zOiBbXSxcbiAgICAgICAgICAgIHBhZ2VDb3VudDogTWF0aC5jZWlsKGRhdGEubWF0Y2hlcyAvIGxpbWl0KSxcbiAgICAgICAgICAgIGN1cnJQYWdlOiBNYXRoLmNlaWwob2Zmc2V0IC8gbGltaXQgKVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwO2kgPCBwYWdlLnBhZ2VDb3VudDtpKyspIHtcbiAgICAgICAgICAgIGlmIChpID09PSBwYWdlLmN1cnJQYWdlKSB7XG4gICAgICAgICAgICAgICAgcGFnZS5idXR0b25zW2ldID0gJ2Rpc2FibGVkJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFnZS5idXR0b25zW2ldID0gJ2VuYWJsZWQnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhZ2U7XG4gICAgfVxuXG4gICAgJHNjb3BlLiR3YXRjaCgnc2VhcmNoLnRlcm0nLCBkZWJvdW5jZSgodGVybSkgPT4ge1xuICAgICAgICAkc2NvcGUuZ2V0SW5ncmVkaWVudHMoMCwgdGVybSk7XG4gICAgfSwgMzUwKSk7XG5cbiAgICAkc2NvcGUuZ2V0SW5ncmVkaWVudHMgPSAocGFnZSA9IDAsIHNlYXJjaFRlcm0gPSAnJTIwJykgPT4ge1xuICAgICAgICBsZXQgdGVybSA9IHNlYXJjaFRlcm07XG5cbiAgICAgICAgaWYgKCF0ZXJtIHx8IHRlcm0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0ZXJtID0gJyUyMCc7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvZmZzZXQgPSBwYWdlICogaW5ncmVkaWVudHNQZXJQYWdlO1xuXG4gICAgICAgIEluZ3JlZGllbnRTZXJ2aWNlLmdldFNlYXJjaCh7c2VhcmNoVGVybTogdGVybSwgb2Zmc2V0fSlcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hlZEluZ3JlZGllbnRzID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaGVkSW5ncmVkaWVudHMucGFnaW5hdGlvbiA9IHBhcnNlUGFnaW5hdGlvbihyZXNwb25zZS5kYXRhLCBpbmdyZWRpZW50c1BlclBhZ2UsIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaGVkSW5ncmVkaWVudHMuc3RhdHVzID0gNTAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZ2V0UGFudHJ5ID0gKCkgPT4ge1xuICAgICAgICAkc2NvcGUucGFudHJ5ID0ge3N0YXR1czogLTEsIGRhdGE6IHt9fTtcblxuICAgICAgICBJbmdyZWRpZW50U2VydmljZS5nZXRQYW50cnkoKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBhbnRyeSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBnZXR0aW5nIHBhbnRyeTogJHtKU09OLnN0cmluZ2lmeShlcnIpfWApO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5hZGRQYW50cnkgPSAoaWQpID0+IHtcbiAgICAgICAgSW5ncmVkaWVudFNlcnZpY2UuYWRkUGFudHJ5KGlkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5nZXRQYW50cnkoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBhZGRpbmcgaW5ncmVkaWVudDogJHtKU09OLnN0cmluZ2lmeShlcnIpfWApO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5yZW1vdmVQYW50cnkgPSAoaWQpID0+IHtcbiAgICAgICAgSW5ncmVkaWVudFNlcnZpY2UucmVtb3ZlUGFudHJ5KGlkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5nZXRQYW50cnkoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciByZW1vdmluZyBpbmdyZWRpZW50OiAke0pTT04uc3RyaW5naWZ5KGVycil9YCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLm5leHRQYWdlSW5ncmVkaWVudHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5pbmdyZWRpZW50cyk7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gKyRzY29wZS5pbmdyZWRpZW50cy5kYXRhLnBhcmFtcy5saW1pdDtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gKCskc2NvcGUuaW5ncmVkaWVudHMuZGF0YS5wYXJhbXMub2Zmc2V0KSArIGxpbWl0O1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7bGltaXQsIG9mZnNldH07XG5cbiAgICAgICAgJHNjb3BlLmdldEluZ3JlZGllbnRzKHBhcmFtcyk7XG4gICAgfTtcblxuICAgICRzY29wZS5wcmV2aW91c1BhZ2VJbmdyZWRpZW50cyA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmluZ3JlZGllbnRzKTtcbiAgICAgICAgY29uc3QgbGltaXQgPSArJHNjb3BlLmluZ3JlZGllbnRzLmRhdGEucGFyYW1zLmxpbWl0O1xuICAgICAgICBsZXQgb2Zmc2V0ID0gKCskc2NvcGUuaW5ncmVkaWVudHMuZGF0YS5wYXJhbXMub2Zmc2V0KSAtIGxpbWl0O1xuXG4gICAgICAgIGlmIChvZmZzZXQgPCAwKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFyYW1zID0ge2xpbWl0LCBvZmZzZXR9O1xuXG4gICAgICAgICRzY29wZS5nZXRJbmdyZWRpZW50cyhwYXJhbXMpO1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnSW5ncmVkaWVudFNlcnZpY2UnLCBNeUluZ3JlZGllbnRzQ29udHJvbGxlcl07XG4iLCJmdW5jdGlvbiBNeVJlY2lwZXNDb250cm9sbGVyKCRyb290U2NvcGUsICRzY29wZSwgUmVjaXBlU2VydmljZSkge1xuXG4gICAgLy8gUmVxdWlyZSB1c2VyIGF1dGhlbnRpY2F0aW9uLlxuICAgICRyb290U2NvcGUuYXV0aCA9ICRyb290U2NvcGUuYXV0aCB8fCB7fTtcbiAgICAkcm9vdFNjb3BlLmF1dGgucmVxdWlyZWQgPSB0cnVlO1xuXG4gICAgJHNjb3BlLmdldExpa2VkUmVjaXBlcyA9ICgpID0+IHtcbiAgICAgICAgaWYgKCRzY29wZS5saWtlZFJlY2lwZXMgJiYgJHNjb3BlLmxpa2VkUmVjaXBlcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUubGlrZWRSZWNpcGVzID0ge3N0YXR1czogLTEsIGRhdGE6IHt9fTtcblxuICAgICAgICBSZWNpcGVTZXJ2aWNlLmdldExpa2VkKClcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5saWtlZFJlY2lwZXMgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubGlrZWRSZWNpcGVzLnN0YXR1cyA9IDUwMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmdldEZhdm9yaXRlZFJlY2lwZXMgPSAoKSA9PiB7XG4gICAgICAgIGlmICgkc2NvcGUuZmF2b3JpdGVkUmVjaXBlcyAmJiAkc2NvcGUuZmF2b3JpdGVkUmVjaXBlcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuZmF2b3JpdGVkUmVjaXBlcyA9IHtzdGF0dXM6IC0xLCBkYXRhOiB7fX07XG5cbiAgICAgICAgUmVjaXBlU2VydmljZS5nZXRGYXZvcml0ZWQoKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgJHNjb3BlLmZhdm9yaXRlZFJlY2lwZXMgPSByZXNwb25zZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAkc2NvcGUuZmF2b3JpdGVkUmVjaXBlcy5zdGF0dXMgPSA1MDA7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZ2V0Q29tcGxldGVkUmVjaXBlcyA9ICgpID0+IHtcbiAgICAgICAgaWYgKCRzY29wZS5jb21wbGV0ZWRSZWNpcGVzICYmICRzY29wZS5jb21wbGV0ZWRSZWNpcGVzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5jb21wbGV0ZWRSZWNpcGVzID0ge3N0YXR1czogLTEsIGRhdGE6IHt9fTtcblxuICAgICAgICBSZWNpcGVTZXJ2aWNlLmdldENvbXBsZXRlZCgpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAkc2NvcGUuY29tcGxldGVkUmVjaXBlcyA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICRzY29wZS5jb21wbGV0ZWRSZWNpcGVzLnN0YXR1cyA9IDUwMDtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICdSZWNpcGVTZXJ2aWNlJywgTXlSZWNpcGVzQ29udHJvbGxlcl07XG4iLCJpbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoLmRlYm91bmNlJztcblxuZnVuY3Rpb24gUmVjaXBlQ29udHJvbGxlcigkc2NvcGUsIFJlY2lwZVNlcnZpY2UpIHtcbiAgICBjb25zdCByZWNpcGVzUGVyUGFnZSA9IDI4O1xuXG4gICAgJHNjb3BlLnNlYXJjaGVkUmVjaXBlcyA9IHtzdGF0dXM6IC0xfTtcblxuICAgIGZ1bmN0aW9uIHBhcnNlUGFnaW5hdGlvbihkYXRhLCBsaW1pdCwgb2Zmc2V0KSB7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSB7XG4gICAgICAgICAgICBidXR0b25zOiBbXSxcbiAgICAgICAgICAgIHBhZ2VDb3VudDogTWF0aC5jZWlsKGRhdGEubWF0Y2hlcyAvIGxpbWl0KSxcbiAgICAgICAgICAgIGN1cnJQYWdlOiBNYXRoLmNlaWwob2Zmc2V0IC8gbGltaXQgKVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwO2kgPCBwYWdlLnBhZ2VDb3VudDtpKyspIHtcbiAgICAgICAgICAgIGlmIChpID09PSBwYWdlLmN1cnJQYWdlKSB7XG4gICAgICAgICAgICAgICAgcGFnZS5idXR0b25zW2ldID0gJ2Rpc2FibGVkJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFnZS5idXR0b25zW2ldID0gJ2VuYWJsZWQnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhZ2U7XG4gICAgfVxuXG4gICAgJHNjb3BlLiR3YXRjaCgnc2VhcmNoLnRlcm0nLCBkZWJvdW5jZSgodGVybSkgPT4ge1xuICAgICAgICB0aGlzLmdldFJlY2lwZXMoMCwgdGVybSk7XG4gICAgfSwgMzUwKSk7XG5cbiAgICB0aGlzLmdldFJlY2lwZXMgPSAocGFnZSA9IDAsIHNlYXJjaFRlcm0gPSAnJTIwJykgPT4ge1xuICAgICAgICBsZXQgdGVybSA9IHNlYXJjaFRlcm07XG5cbiAgICAgICAgaWYgKCF0ZXJtIHx8IHRlcm0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0ZXJtID0gJyUyMCc7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvZmZzZXQgPSBwYWdlICogcmVjaXBlc1BlclBhZ2U7XG5cbiAgICAgICAgUmVjaXBlU2VydmljZS5nZXRTZWFyY2goe3NlYXJjaFRlcm06IHRlcm0sIG9mZnNldH0pXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VhcmNoZWRSZWNpcGVzID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlYXJjaGVkUmVjaXBlcy5wYWdpbmF0aW9uID0gcGFyc2VQYWdpbmF0aW9uKHJlc3BvbnNlLmRhdGEsIHJlY2lwZXNQZXJQYWdlLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWFyY2hlZFJlY2lwZXMuc3RhdHVzID0gNTAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZ2V0U3RhcnMgPSAobnVtU3RhcnMpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhcnMgPSBbdHJ1ZSwgdHJ1ZSwgZmFsc2VdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwO2kgPCBudW1TdGFycztpKyspIHtcbiAgICAgICAgICAgIHN0YXJzLnB1c2godHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IG51bVN0YXJzO2kgPCA1O2krKykge1xuICAgICAgICAgICAgc3RhcnMucHVzaChmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXJzO1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFsnJHNjb3BlJywgJ1JlY2lwZVNlcnZpY2UnLCBSZWNpcGVDb250cm9sbGVyXTtcbiIsImZ1bmN0aW9uIFJlY2lwZVN0cmVhbUNvbnRyb2xsZXIoJHJvb3RTY29wZSwgJHNjb3BlLCBSZWNpcGVTZXJ2aWNlKSB7XG5cbiAgICAvLyBSZXF1aXJlIHVzZXIgYXV0aGVudGljYXRpb24uXG4gICAgJHJvb3RTY29wZS5hdXRoID0gJHJvb3RTY29wZS5hdXRoIHx8IHt9O1xuICAgICRyb290U2NvcGUuYXV0aC5yZXF1aXJlZCA9IHRydWU7XG5cbiAgICAkc2NvcGUuJHdhdGNoKCdyZWNpcGVTdHJlYW0uY3VycmVudEluZGV4JywgKCkgPT4ge1xuICAgICAgICBpZiAoJHNjb3BlLnJlY2lwZVN0cmVhbS5jdXJyZW50SW5kZXggPiAtMSAmJiAkc2NvcGUucmVjaXBlU3RyZWFtLmN1cnJlbnRJbmRleCA8ICRzY29wZS5yZWNpcGVTdHJlYW0uZGF0YS5yZWNpcGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgJHNjb3BlLnJlY2lwZVN0cmVhbS5jdXJyZW50ID0gJHNjb3BlLnJlY2lwZVN0cmVhbS5kYXRhLnJlY2lwZXNbJHNjb3BlLnJlY2lwZVN0cmVhbS5jdXJyZW50SW5kZXhdLmlkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLnJlY2lwZVN0cmVhbS5jdXJyZW50ID0gLTE7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgICRzY29wZS5nZXRSZWNpcGVTdHJlYW0gPSAoKSA9PiB7XG4gICAgICAgIGlmICgkc2NvcGUucmVjaXBlU3RyZWFtICYmICRzY29wZS5yZWNpcGVTdHJlYW0uc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnJlY2lwZVN0cmVhbSA9IHtzdGF0dXM6IC0xLCBkYXRhOiB7fX07XG4gICAgICAgIFJlY2lwZVNlcnZpY2UuZ2V0UmVjaXBlU3RyZWFtKClcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjaXBlU3RyZWFtID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlY2lwZVN0cmVhbS5jdXJyZW50SW5kZXggPSAtMTtcblxuICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgYSB2YXJpYWJsZSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlY2lwZVN0cmVhbS5jdXJyZW50SW5kZXgrKztcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjaXBlU3RyZWFtLnN0YXR1cyA9IDUwMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmxpa2VSZWNpcGUgPSAoaWQpID0+IHtcbiAgICAgICAgUmVjaXBlU2VydmljZS5saWtlUmVjaXBlKGlkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBsaWtpbmcgcmVjaXBlOiAke0pTT04uc3RyaW5naWZ5KGVycil9YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5yZWNpcGVTdHJlYW0uY3VycmVudEluZGV4Kys7XG4gICAgfTtcblxuICAgICRzY29wZS5kaXNsaWtlUmVjaXBlID0gKGlkKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGlkKTtcbiAgICAgICAgJHNjb3BlLnJlY2lwZVN0cmVhbS5jdXJyZW50SW5kZXgrKztcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJ1JlY2lwZVNlcnZpY2UnLCBSZWNpcGVTdHJlYW1Db250cm9sbGVyXTtcbiIsImZ1bmN0aW9uIFJlY2lwZVZpZXdDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsIFJlY2lwZVNlcnZpY2UpIHtcbiAgICAkc2NvcGUuZ2V0UmVjaXBlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCByZWNpcGVJZCA9ICRzdGF0ZVBhcmFtcy5yZWNpcGVJZDtcblxuICAgICAgICAkc2NvcGUucmVjaXBlID0ge3N0YXR1czogLTEsIGRhdGE6IHt9fTtcblxuICAgICAgICBSZWNpcGVTZXJ2aWNlLmdldFJlY2lwZShyZWNpcGVJZClcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5yZWNpcGUuc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICAgICAgICAgICRzY29wZS5yZWNpcGUuZGF0YSA9IHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjaXBlLnN0YXR1cyA9IDUwMDtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZmF2b3JpdGVSZWNpcGUgPSAoKSA9PiB7XG4gICAgICAgICRzY29wZS5yZWNpcGUuZGF0YS5mYXZvcml0ZWRMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgUmVjaXBlU2VydmljZS5mYXZvcml0ZVJlY2lwZSgkc2NvcGUucmVjaXBlLmRhdGEuaWQpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlY2lwZS5kYXRhLmZhdm9yaXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgZmF2b3JpdGluZyByZWNpcGU6ICR7SlNPTi5zdHJpbmdpZnkoZXJyKX1gKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlY2lwZS5kYXRhLmZhdm9yaXRlZExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUubWFya0NvbXBsZXRlZCA9ICgpID0+IHtcbiAgICAgICAgJHNjb3BlLnJlY2lwZS5kYXRhLmNvbXBsZXRlZExvYWRpbmcgPSB0cnVlO1xuICAgICAgICBSZWNpcGVTZXJ2aWNlLmNvbXBsZXRlUmVjaXBlKCRzY29wZS5yZWNpcGUuZGF0YS5pZClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjaXBlLmRhdGEuY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBjb21wbGV0aW5nIHJlY2lwZTogJHtKU09OLnN0cmluZ2lmeShlcnIpfWApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjaXBlLmRhdGEuY29tcGxldGVkTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5tYXJrVW5Db21wbGV0ZWQgPSAoKSA9PiB7XG4gICAgICAgICRzY29wZS5yZWNpcGUuZGF0YS5jb21wbGV0ZWRMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgUmVjaXBlU2VydmljZS51bkNvbXBsZXRlUmVjaXBlKCRzY29wZS5yZWNpcGUuZGF0YS5pZClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjaXBlLmRhdGEuY29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgdW4tY29tcGxldGVkIHJlY2lwZTogJHtKU09OLnN0cmluZ2lmeShlcnIpfWApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjaXBlLmRhdGEuY29tcGxldGVkTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS51bkZhdm9yaXRlUmVjaXBlID0gKCkgPT4ge1xuICAgICAgICAkc2NvcGUucmVjaXBlLmRhdGEuZmF2b3JpdGVkTG9hZGluZyA9IHRydWU7XG4gICAgICAgIFJlY2lwZVNlcnZpY2UudW5GYXZvcml0ZVJlY2lwZSgkc2NvcGUucmVjaXBlLmRhdGEuaWQpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlY2lwZS5kYXRhLmZhdm9yaXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIHVuLWZhdm9yaXRpbmcgcmVjaXBlOiAke0pTT04uc3RyaW5naWZ5KGVycil9YCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5yZWNpcGUuZGF0YS5mYXZvcml0ZWRMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBbJyRzY29wZScsICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJ1JlY2lwZVNlcnZpY2UnLCBSZWNpcGVWaWV3Q29udHJvbGxlcl07XG4iLCJmdW5jdGlvbiBSZWNvdmVyeUNvbnRyb2xsZXIoJHNjb3BlLCBBdXRoU2VydmljZSkge1xuICAgICRzY29wZS5yZWNvdmVyU3VibWl0dGluZyA9IGZhbHNlO1xuICAgICRzY29wZS5yZWNvdmVyRm9ybVN1Y2Nlc3MgPSBmYWxzZTtcblxuICAgICRzY29wZS5zZW5kUmVjb3ZlcnlUb2tlbiA9ICgpID0+IHtcbiAgICAgICAgJHNjb3BlLnJlY292ZXJGb3JtID0ge2dlbmVyYWw6IHt9LCBlbWFpbDoge319O1xuICAgICAgICAkc2NvcGUucmVjb3ZlclN1Ym1pdHRpbmcgPSB0cnVlO1xuXG4gICAgICAgIC8vIERvIHNvbWUgc2ltcGxlIGlucHV0IHZhbGlkYXRpb24uXG4gICAgICAgIGlmICghJHNjb3BlLmFjY291bnQpIHtcbiAgICAgICAgICAgICRzY29wZS5yZWNvdmVyRm9ybS5lbWFpbC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUucmVjb3ZlclN1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIEF1dGhTZXJ2aWNlLmZvcmdvdFBhc3N3b3JkKCRzY29wZS5hY2NvdW50LmVtYWlsKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5yZWNvdmVyRm9ybVN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5yZWNvdmVyU3VibWl0dGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlY292ZXJGb3JtLmdlbmVyYWwuaXNzdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5yZWNvdmVyU3VibWl0dGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgWyckc2NvcGUnLCAnQXV0aFNlcnZpY2UnLCBSZWNvdmVyeUNvbnRyb2xsZXJdO1xuIiwiZnVuY3Rpb24gUmVjb3ZlcnlOZXdQYXNzd29yZENvbnRyb2xsZXIoJHNjb3BlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgQXV0aFNlcnZpY2UpIHtcbiAgICAkc2NvcGUucmVjb3ZlclN1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAkc2NvcGUucmVjb3ZlclRva2VuVmFsaWQgPSB0cnVlO1xuXG4gICAgJHNjb3BlLmNoYW5nZVBhc3N3b3JkID0gKCkgPT4ge1xuICAgICAgICAkc2NvcGUucmVjb3ZlckZvcm0gPSB7Z2VuZXJhbDoge30sIHBhc3N3b3JkOiB7fSwgY29uZmlybToge319O1xuICAgICAgICAkc2NvcGUucmVjb3ZlclN1Ym1pdHRpbmcgPSB0cnVlO1xuXG4gICAgICAgIC8vIERvIHNvbWUgc2ltcGxlIGlucHV0IHZhbGlkYXRpb24uXG4gICAgICAgIGlmICghJHNjb3BlLmFjY291bnQgfHwgISRzY29wZS5hY2NvdW50LnBhc3N3b3JkIHx8ICRzY29wZS5hY2NvdW50LnBhc3N3b3JkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJHNjb3BlLnJlY292ZXJGb3JtLnBhc3N3b3JkLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS5yZWNvdmVyU3VibWl0dGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5hY2NvdW50LnBhc3N3b3JkICE9PSAkc2NvcGUuYWNjb3VudC5jb25maXJtKSB7XG4gICAgICAgICAgICAkc2NvcGUucmVjb3ZlckZvcm0uY29uZmlybS5taXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUucmVjb3ZlclN1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIEF1dGhTZXJ2aWNlLmZvcmdvdFBhc3N3b3JkQ29uZmlybSgkc3RhdGVQYXJhbXMudG9rZW4sICRzY29wZS5hY2NvdW50LnBhc3N3b3JkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5yZWNvdmVyU3VibWl0dGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gaG9tZXBhZ2UgYWZ0ZXIgcmVjb3ZlcmluZy5cbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5yZWNvdmVyRm9ybS5nZW5lcmFsLmlzc3VlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVjb3ZlclN1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFsnJHNjb3BlJywgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnQXV0aFNlcnZpY2UnLCBSZWNvdmVyeU5ld1Bhc3N3b3JkQ29udHJvbGxlcl07XG4iLCJmdW5jdGlvbiBSZWdpc3RyYXRpb25Db250cm9sbGVyKCRzY29wZSwgJGNvb2tpZXMsICRzdGF0ZSwgQXV0aFNlcnZpY2UpIHtcbiAgICAkc2NvcGUucmVnaXN0ZXJTdWJtaXR0aW5nID0gZmFsc2U7XG5cbiAgICAkc2NvcGUucmVnaXN0ZXIgPSAoKSA9PiB7XG4gICAgICAgICRzY29wZS5yZWdpc3RlckZvcm0gPSB7Z2VuZXJhbDoge30sIGVtYWlsOiB7fSwgcGFzc3dvcmQ6IHt9LCBjb25maXJtOiB7fX07XG4gICAgICAgICRzY29wZS5yZWdpc3RlclN1Ym1pdHRpbmcgPSB0cnVlO1xuXG4gICAgICAgIC8vIERvIHNvbWUgc2ltcGxlIGlucHV0IHZhbGlkYXRpb24uXG4gICAgICAgIGlmICghJHNjb3BlLmFjY291bnQpIHtcbiAgICAgICAgICAgICRzY29wZS5yZWdpc3RlckZvcm0uZ2VuZXJhbFsnbm8taW5wdXQnXSA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUucmVnaXN0ZXJTdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoISRzY29wZS5hY2NvdW50LnBhc3N3b3JkIHx8ICRzY29wZS5hY2NvdW50LnBhc3N3b3JkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJHNjb3BlLnJlZ2lzdGVyRm9ybS5wYXNzd29yZC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUucmVnaXN0ZXJTdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLmFjY291bnQucGFzc3dvcmQgIT09ICRzY29wZS5hY2NvdW50LmNvbmZpcm0pIHtcbiAgICAgICAgICAgICRzY29wZS5yZWdpc3RlckZvcm0uY29uZmlybS5taXNtYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAkc2NvcGUucmVnaXN0ZXJTdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBBdXRoU2VydmljZS5yZWdpc3Rlcigkc2NvcGUuYWNjb3VudC5lbWFpbCwgJHNjb3BlLmFjY291bnQucGFzc3dvcmQpXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcblxuICAgICAgICAgICAgICAgIC8vIExvZyB0aGUgdXNlciBpbi5cbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5sb2dpbih7YXBpX3Rva2VuOiByZXNwb25zZS5kYXRhLmFwaV90b2tlbn0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICRzY29wZS5yZWdpc3RlckZvcm0uZW1haWwudGFrZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICRzY29wZS5yZWdpc3RlclN1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFsnJHNjb3BlJywgJyRjb29raWVzJywgJyRzdGF0ZScsICdBdXRoU2VydmljZScsIFJlZ2lzdHJhdGlvbkNvbnRyb2xsZXJdO1xuIiwiaW1wb3J0IHthcHB9IGZyb20gJy4uL2Jvb3RzdHJhcCc7XG5pbXBvcnQgTWFpbkNvbnRyb2xsZXIgZnJvbSAnLi9NYWluQ29udHJvbGxlcic7XG5pbXBvcnQgSGVhZGVyQ29udHJvbGxlciBmcm9tICcuL0hlYWRlckNvbnRyb2xsZXInO1xuaW1wb3J0IEZvb3RlckNvbnRyb2xsZXIgZnJvbSAnLi9Gb290ZXJDb250cm9sbGVyJztcbmltcG9ydCBIb21lQ29udHJvbGxlciBmcm9tICcuL0hvbWVDb250cm9sbGVyJztcbmltcG9ydCBMb2dpbkNvbnRyb2xsZXIgZnJvbSAnLi9Mb2dpbkNvbnRyb2xsZXInO1xuaW1wb3J0IEFjY291bnRDb250cm9sbGVyIGZyb20gJy4vQWNjb3VudENvbnRyb2xsZXInO1xuaW1wb3J0IE15UmVjaXBlc0NvbnRyb2xsZXIgZnJvbSAnLi9NeVJlY2lwZXNDb250cm9sbGVyJztcbmltcG9ydCBNeUluZ3JlZGllbnRzQ29udHJvbGxlciBmcm9tICcuL015SW5ncmVkaWVudHNDb250cm9sbGVyJztcbmltcG9ydCBSZWdpc3RyYXRpb25Db250cm9sbGVyIGZyb20gJy4vUmVnaXN0cmF0aW9uQ29udHJvbGxlcic7XG5pbXBvcnQgUmVjb3ZlcnlDb250cm9sbGVyIGZyb20gJy4vUmVjb3ZlcnlDb250cm9sbGVyJztcbmltcG9ydCBSZWNvdmVyeU5ld1Bhc3N3b3JkQ29udHJvbGxlciBmcm9tICcuL1JlY292ZXJ5TmV3UGFzc3dvcmRDb250cm9sbGVyJztcbmltcG9ydCBSZWNpcGVDb250cm9sbGVyIGZyb20gJy4vUmVjaXBlQ29udHJvbGxlcic7XG5pbXBvcnQgUmVjaXBlVmlld0NvbnRyb2xsZXIgZnJvbSAnLi9SZWNpcGVWaWV3Q29udHJvbGxlcic7XG5pbXBvcnQgUmVjaXBlU3RyZWFtQ29udHJvbGxlciBmcm9tICcuL1JlY2lwZVN0cmVhbUNvbnRyb2xsZXInO1xuXG5hcHAuY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBNYWluQ29udHJvbGxlcik7XG5hcHAuY29udHJvbGxlcignSGVhZGVyQ29udHJvbGxlcicsIEhlYWRlckNvbnRyb2xsZXIpO1xuYXBwLmNvbnRyb2xsZXIoJ0Zvb3RlckNvbnRyb2xsZXInLCBGb290ZXJDb250cm9sbGVyKTtcbmFwcC5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIEhvbWVDb250cm9sbGVyKTtcbmFwcC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBMb2dpbkNvbnRyb2xsZXIpO1xuYXBwLmNvbnRyb2xsZXIoJ0FjY291bnRDb250cm9sbGVyJywgQWNjb3VudENvbnRyb2xsZXIpO1xuYXBwLmNvbnRyb2xsZXIoJ015UmVjaXBlc0NvbnRyb2xsZXInLCBNeVJlY2lwZXNDb250cm9sbGVyKTtcbmFwcC5jb250cm9sbGVyKCdNeUluZ3JlZGllbnRzQ29udHJvbGxlcicsIE15SW5ncmVkaWVudHNDb250cm9sbGVyKTtcbmFwcC5jb250cm9sbGVyKCdSZWdpc3RyYXRpb25Db250cm9sbGVyJywgUmVnaXN0cmF0aW9uQ29udHJvbGxlcik7XG5hcHAuY29udHJvbGxlcignUmVjb3ZlcnlDb250cm9sbGVyJywgUmVjb3ZlcnlDb250cm9sbGVyKTtcbmFwcC5jb250cm9sbGVyKCdSZWNvdmVyeU5ld1Bhc3N3b3JkQ29udHJvbGxlcicsIFJlY292ZXJ5TmV3UGFzc3dvcmRDb250cm9sbGVyKTtcbmFwcC5jb250cm9sbGVyKCdSZWNpcGVDb250cm9sbGVyJywgUmVjaXBlQ29udHJvbGxlcik7XG5hcHAuY29udHJvbGxlcignUmVjaXBlVmlld0NvbnRyb2xsZXInLCBSZWNpcGVWaWV3Q29udHJvbGxlcik7XG5hcHAuY29udHJvbGxlcignUmVjaXBlU3RyZWFtQ29udHJvbGxlcicsIFJlY2lwZVN0cmVhbUNvbnRyb2xsZXIpO1xuIiwiZnVuY3Rpb24gRm9vdGVyRGlyZWN0aXZlKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3BhcnRpYWxzL2Zvb3Rlci5odG1sJyxcbiAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdGb290ZXJDb250cm9sbGVyJ1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFtGb290ZXJEaXJlY3RpdmVdO1xuIiwiZnVuY3Rpb24gSGVhZGVyRGlyZWN0aXZlKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3BhcnRpYWxzL2hlYWRlci5odG1sJyxcbiAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdIZWFkZXJDb250cm9sbGVyJ1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFtIZWFkZXJEaXJlY3RpdmVdO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIHNlYXJjaCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9wYXJ0aWFscy9yZWNpcGUvcmVjaXBlLXNlYXJjaC5odG1sJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIHNlYXJjaFRlcm06ICdAJ1xuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOiAnUmVjaXBlQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3JlY2lwZSdcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJldmlldygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9wYXJ0aWFscy9yZWNpcGUvcmVjaXBlLXByZXZpZXcuaHRtbCcsXG4gICAgICAgIHNjb3BlOiB0cnVlLFxuICAgICAgICBsaW5rOiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpID0+IHtcbiAgICAgICAgICAgIHNjb3BlLnJlY2lwZSA9IEpTT04ucGFyc2UoYXR0cmlidXRlcy5yZWNpcGVEYXRhKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2aWV3KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3BhcnRpYWxzL3JlY2lwZS9yZWNpcGUtdmlldy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlY2lwZVZpZXdDb250cm9sbGVyJ1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsaWtlZCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9wYXJ0aWFscy9yZWNpcGUvcmVjaXBlLWxpa2VkLmh0bWwnLFxuICAgICAgICBzY29wZTogdHJ1ZSxcbiAgICAgICAgY29udHJvbGxlcjogJ015UmVjaXBlc0NvbnRyb2xsZXInXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBsZXRlZCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9wYXJ0aWFscy9yZWNpcGUvcmVjaXBlLWNvbXBsZXRlZC5odG1sJyxcbiAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdNeVJlY2lwZXNDb250cm9sbGVyJ1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmYXZvcml0ZWQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvcGFydGlhbHMvcmVjaXBlL3JlY2lwZS1mYXZvcml0ZWQuaHRtbCcsXG4gICAgICAgIHNjb3BlOiB0cnVlLFxuICAgICAgICBjb250cm9sbGVyOiAnTXlSZWNpcGVzQ29udHJvbGxlcidcbiAgICB9O1xufVxuIiwiZnVuY3Rpb24gVW5hdXRob3JpemVkRGlyZWN0aXZlKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3BhcnRpYWxzL3VuYXV0aG9yaXplZC5odG1sJyxcbiAgICAgICAgc2NvcGU6IHRydWVcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBbVW5hdXRob3JpemVkRGlyZWN0aXZlXTtcbiIsImltcG9ydCB7YXBwfSBmcm9tICcuLi9ib290c3RyYXAnO1xuaW1wb3J0IEhlYWRlckRpcmVjdGl2ZSBmcm9tICcuL0hlYWRlckRpcmVjdGl2ZSc7XG5pbXBvcnQgRm9vdGVyRGlyZWN0aXZlIGZyb20gJy4vRm9vdGVyRGlyZWN0aXZlJztcbmltcG9ydCBVbmF1dGhvcml6ZWREaXJlY3RpdmUgZnJvbSAnLi9VbmF1dGhvcml6ZWREaXJlY3RpdmUnO1xuaW1wb3J0IHtwcmV2aWV3IGFzIFJlY2lwZVByZXZpZXdEaXJlY3RpdmUsIHNlYXJjaCBhcyBSZWNpcGVTZWFyY2hEaXJlY3RpdmV9IGZyb20gJy4vUmVjaXBlRGlyZWN0aXZlJztcbmltcG9ydCB7dmlldyBhcyBSZWNpcGVWaWV3RGlyZWN0aXZlLCBsaWtlZCBhcyBSZWNpcGVzTGlrZWREaXJlY3RpdmV9IGZyb20gJy4vUmVjaXBlRGlyZWN0aXZlJztcbmltcG9ydCB7Y29tcGxldGVkIGFzIFJlY2lwZXNDb21wbGV0ZWREaXJlY3RpdmUsIGZhdm9yaXRlZCBhcyBSZWNpcGVzRmF2b3JpdGVkRGlyZWN0aXZlfSBmcm9tICcuL1JlY2lwZURpcmVjdGl2ZSc7XG5cbmFwcC5kaXJlY3RpdmUoJ2hlYWRlcicsIEhlYWRlckRpcmVjdGl2ZSk7XG5hcHAuZGlyZWN0aXZlKCdmb290ZXInLCBGb290ZXJEaXJlY3RpdmUpO1xuYXBwLmRpcmVjdGl2ZSgndW5hdXRob3JpemVkJywgVW5hdXRob3JpemVkRGlyZWN0aXZlKTtcbmFwcC5kaXJlY3RpdmUoJ3JlY2lwZXByZXZpZXcnLCBSZWNpcGVQcmV2aWV3RGlyZWN0aXZlKTtcbmFwcC5kaXJlY3RpdmUoJ3JlY2lwZXNlYXJjaCcsIFJlY2lwZVNlYXJjaERpcmVjdGl2ZSk7XG5hcHAuZGlyZWN0aXZlKCdyZWNpcGV2aWV3JywgUmVjaXBlVmlld0RpcmVjdGl2ZSk7XG5hcHAuZGlyZWN0aXZlKCdyZWNpcGVzbGlrZWQnLCBSZWNpcGVzTGlrZWREaXJlY3RpdmUpO1xuYXBwLmRpcmVjdGl2ZSgncmVjaXBlc2NvbXBsZXRlZCcsIFJlY2lwZXNDb21wbGV0ZWREaXJlY3RpdmUpO1xuYXBwLmRpcmVjdGl2ZSgncmVjaXBlc2Zhdm9yaXRlZCcsIFJlY2lwZXNGYXZvcml0ZWREaXJlY3RpdmUpO1xuIiwiaW1wb3J0IHthcHB9IGZyb20gJy4vYm9vdHN0cmFwJztcblxuYXBwLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsXG4gICAgICAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikgPT4ge1xuICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblxuICAgICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgICAgICAgICAgIHVybDogJy8nLFxuICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaG9tZS5odG1sJyxcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLnN0YXRlKCdhY2NvdW50Jywge1xuICAgICAgICAgICAgICAgICAgdXJsOiAnL2FjY291bnQvJyxcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2FjY291bnQuaHRtbCcsXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQWNjb3VudENvbnRyb2xsZXInXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5zdGF0ZSgnbXktcmVjaXBlcycsIHtcbiAgICAgICAgICAgICAgICAgIHVybDogJy9hY2NvdW50L3JlY2lwZXMvJyxcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL215LXJlY2lwZXMuaHRtbCcsXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTXlSZWNpcGVzQ29udHJvbGxlcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLnN0YXRlKCdteS1pbmdyZWRpZW50cycsIHtcbiAgICAgICAgICAgICAgICAgIHVybDogJy9hY2NvdW50L2luZ3JlZGllbnRzLycsXG4gICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9teS1pbmdyZWRpZW50cy5odG1sJyxcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdNeUluZ3JlZGllbnRzQ29udHJvbGxlcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLnN0YXRlKCdyZWdpc3RlcicsIHtcbiAgICAgICAgICAgICAgICAgIHVybDogJy9yZWdpc3Rlci8nLFxuICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvcmVnaXN0ZXIuaHRtbCcsXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUmVnaXN0cmF0aW9uQ29udHJvbGxlcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLnN0YXRlKCdmb3Jnb3QtcGFzc3dvcmQnLCB7XG4gICAgICAgICAgICAgICAgICB1cmw6ICcvZm9yZ290LXBhc3N3b3JkLycsXG4gICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9mb3Jnb3QtcGFzc3dvcmQuaHRtbCcsXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUmVjb3ZlcnlDb250cm9sbGVyJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuc3RhdGUoJ2ZvcmdvdC1wYXNzd29yZC10b2tlbicsIHtcbiAgICAgICAgICAgICAgICAgIHVybDogJy9mb3Jnb3QtcGFzc3dvcmQvOnRva2VuJyxcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2ZvcmdvdC1wYXNzd29yZC10b2tlbi5odG1sJyxcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZWNvdmVyeU5ld1Bhc3N3b3JkQ29udHJvbGxlcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLnN0YXRlKCdyZWNpcGVzJywge1xuICAgICAgICAgICAgICAgICAgdXJsOiAnL3JlY2lwZXMvJyxcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3JlY2lwZXMuaHRtbCcsXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUmVjaXBlQ29udHJvbGxlcidcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLnN0YXRlKCdyZWNpcGVWaWV3Jywge1xuICAgICAgICAgICAgICAgICAgdXJsOiAnL3JlY2lwZXMvcmVjaXBlLzpyZWNpcGVJZC8nLFxuICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvcmVjaXBlLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlY2lwZVZpZXdDb250cm9sbGVyJ1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuc3RhdGUoJ3JlY2lwZVN0cmVhbScsIHtcbiAgICAgICAgICAgICAgICAgIHVybDogJy9yZWNpcGVzL3JlY2lwZVN0cmVhbS8nLFxuICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvcmVjaXBlLXN0cmVhbS5odG1sJyxcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdSZWNpcGVTdHJlYW1Db250cm9sbGVyJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgIH1dKTtcbiIsImZ1bmN0aW9uIEF1dGhTZXJ2aWNlKCRodHRwLCAkbG9jYWxTdG9yYWdlLCAkc2Vzc2lvblN0b3JhZ2UsICRtZERpYWxvZykge1xuICAgIGxldCBjdXJyZW50VXNlcjtcbiAgICBsZXQgbW9kYWxJc09wZW4gPSBmYWxzZTtcbiAgICBsZXQgbW9kYWw7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZWdpc3RlcjogKGVtYWlsLCBwYXNzd29yZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJ2h0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L2FjY291bnRzL2NyZWF0ZScsIHtcbiAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGxvZ2luOiAoYXJncykgPT4ge1xuICAgICAgICAgICAgaWYgKChhcmdzLmVtYWlsICYmIGFyZ3MuZW1haWwubGVuZ3RoID4gMCkgJiYgKGFyZ3MucGFzc3dvcmQgJiYgYXJncy5wYXNzd29yZC5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCdodHRwOi8vYXBpLmtpdGNoZW4uc3VwcG9ydC9hY2NvdW50cy9sb2dpbicsIHtcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGFyZ3MuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBhcmdzLnBhc3N3b3JkXG4gICAgICAgICAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0b3JlIHVzZXIgaW5mbyBpbiBjb29raWVzLlxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5yZW1lbWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5rc0xvZ2luVG9rZW4gPSByZXNwb25zZS5kYXRhLmFwaV90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZXNzaW9uU3RvcmFnZS5rc0xvZ2luVG9rZW4gPSByZXNwb25zZS5kYXRhLmFwaV90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFyZ3MuYXBpX3Rva2VuICYmIGFyZ3MuYXBpX3Rva2VuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KGBodHRwOi8vYXBpLmtpdGNoZW4uc3VwcG9ydC9hY2NvdW50P2FwaV90b2tlbj0ke2FyZ3MuYXBpX3Rva2VufWApXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSB1c2VyIGluZm8gaW4gY29va2llcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnJlbWVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5rc0xvZ2luVG9rZW4gPSByZXNwb25zZS5kYXRhLmFwaV90b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlc3Npb25TdG9yYWdlLmtzTG9naW5Ub2tlbiA9IHJlc3BvbnNlLmRhdGEuYXBpX3Rva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbG9nb3V0OiAoKSA9PiB7XG4gICAgICAgICAgICBjdXJyZW50VXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlLmtzTG9naW5Ub2tlbjtcbiAgICAgICAgICAgIGRlbGV0ZSAkc2Vzc2lvblN0b3JhZ2Uua3NMb2dpblRva2VuO1xuICAgICAgICB9LFxuICAgICAgICBmb3Jnb3RQYXNzd29yZDogKGVtYWlsKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnaHR0cDovL2FwaS5raXRjaGVuLnN1cHBvcnQvYWNjb3VudHMvcmVzZXQvcmVxdWVzdCcsIHtcbiAgICAgICAgICAgICAgICBlbWFpbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZvcmdvdFBhc3N3b3JkQ29uZmlybTogKHJlc2V0VG9rZW4sIHBhc3N3b3JkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnaHR0cDovL2FwaS5raXRjaGVuLnN1cHBvcnQvYWNjb3VudHMvcmVzZXQvY29uZmlybScsIHtcbiAgICAgICAgICAgICAgICByZXNldF90b2tlbjogcmVzZXRUb2tlbixcbiAgICAgICAgICAgICAgICBwYXNzd29yZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEN1cnJlbnRVc2VyOiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudFVzZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEFwaVRva2VuOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFVzZXIuYXBpX3Rva2VuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gJyc7XG5cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBsb2dpbiBtb2RhbCBmdW5jdGlvbnNcbiAgICAgICAgbG9naW5Nb2RhbDoge1xuICAgICAgICAgICAgb3BlbjogKCRldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIG1vZGFsSXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2xvZ2luLW1vZGFsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RXZlbnQ6ICRldmVudCxcbiAgICAgICAgICAgICAgICAgICAgb25SZW1vdmluZzogKCkgPT4geyBtb2RhbElzT3BlbiA9IGZhbHNlOyB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobW9kYWxJc09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmhpZGUobW9kYWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRNb2RhbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb2RhbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc09wZW46ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kYWxJc09wZW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBbJyRodHRwJywgJyRsb2NhbFN0b3JhZ2UnLCAnJHNlc3Npb25TdG9yYWdlJywgJyRtZERpYWxvZycsIEF1dGhTZXJ2aWNlXTtcbiIsImZ1bmN0aW9uIHBhcnNlSW5ncmVkaWVudHMocHJvbWlzZSkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHJlc3BvbnNlLmNvbmZpZy51cmwuc3BsaXQoJz8nKVsxXS5zcGxpdCgnJicpO1xuXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHt9O1xuXG4gICAgICAgIHJlcXVlc3QuZm9yRWFjaCgocGFyYW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtRGF0YSA9IHBhcmFtLnNwbGl0KCc9Jyk7XG5cbiAgICAgICAgICAgIHBhcmFtc1twYXJhbURhdGFbMF1dID0gcGFyYW1EYXRhWzFdO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXNwb25zZS5kYXRhLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgaWYgKHBhcmFtcy5vZmZzZXQgJiYgcGFyYW1zLmxpbWl0KSB7XG4gICAgICAgICAgICByZXNwb25zZS5kYXRhLnJhbmdlID0gYCR7cGFyYW1zLm9mZnNldH0gLSAkeytwYXJhbXMub2Zmc2V0ICsgK3BhcmFtcy5saW1pdH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBSZWNpcGVTZXJ2aWNlKCRodHRwLCAkcSwgQXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRTZWFyY2g6IChwYXJhbXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHtzZWFyY2hUZXJtLCBsaW1pdCA9IDI4LCBvZmZzZXQgPSAwfSA9IHBhcmFtcztcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gQXV0aFNlcnZpY2UuZ2V0QXBpVG9rZW4oKTtcblxuICAgICAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChgaHR0cDovL2FwaS5raXRjaGVuLnN1cHBvcnQvaW5ncmVkaWVudHMvJHtzZWFyY2hUZXJtfT9saW1pdD0ke2xpbWl0fSZvZmZzZXQ9JHtvZmZzZXR9JmFwaV90b2tlbj0ke3Rva2VufWApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KGBodHRwOi8vYXBpLmtpdGNoZW4uc3VwcG9ydC9pbmdyZWRpZW50cy8ke3NlYXJjaFRlcm19P2xpbWl0PSR7bGltaXR9Jm9mZnNldD0ke29mZnNldH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2V0SW5ncmVkaWVudHM6IChwYXJhbXMgPSB7fSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qge2xpbWl0ID0gMzAsIG9mZnNldCA9IDB9ID0gcGFyYW1zO1xuXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbmdyZWRpZW50cygkaHR0cC5nZXQoYGh0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L2luZ3JlZGllbnRzP2xpbWl0PSR7bGltaXR9Jm9mZnNldD0ke29mZnNldH1gKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFBhbnRyeTogKHBhcmFtcyA9IHt9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7bGltaXQgPSAzMCwgb2Zmc2V0ID0gMH0gPSBwYXJhbXM7XG5cbiAgICAgICAgICAgIHJldHVybiBwYXJzZUluZ3JlZGllbnRzKCRodHRwLmdldChgaHR0cDovL2FwaS5raXRjaGVuLnN1cHBvcnQvcGFudHJ5P2FwaV90b2tlbj0ke0F1dGhTZXJ2aWNlLmdldEFwaVRva2VuKCl9JmxpbWl0PSR7bGltaXR9Jm9mZnNldD0ke29mZnNldH1gKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZFBhbnRyeTogKGluZ3JlZGllbnRJZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYGh0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L3BhbnRyeWAsIHthcGlfdG9rZW46IEF1dGhTZXJ2aWNlLmdldEFwaVRva2VuKCksIGluZ3JlZGllbnRfaWQ6IGluZ3JlZGllbnRJZH0pO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmVQYW50cnk6IChpbmdyZWRpZW50SWQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGBodHRwOi8vYXBpLmtpdGNoZW4uc3VwcG9ydC9wYW50cnlgLCB7YXBpX3Rva2VuOiBBdXRoU2VydmljZS5nZXRBcGlUb2tlbigpLCBpbmdyZWRpZW50X2lkOiBpbmdyZWRpZW50SWQsIHZhbHVlOiBmYWxzZX0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgWyckaHR0cCcsICckcScsICdBdXRoU2VydmljZScsIFJlY2lwZVNlcnZpY2VdO1xuIiwiXG4vLyBQYXJzZSBhbiBhcnJheSBvZiByZWNpcGVzLlxuZnVuY3Rpb24gcGFyc2VSZWNpcGVBcnJheShwcm9taXNlKSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmVzcG9uc2UuZGF0YS5yZWNpcGVzID0gcmVzcG9uc2UuZGF0YS5yZWNpcGVzIHx8IHJlc3BvbnNlLmRhdGEubGlrZXMgfHwge307XG4gICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVjaXBlcyAmJiByZXNwb25zZS5kYXRhLnJlY2lwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEucmVjaXBlcy5mb3JFYWNoKChwYXJ0LCByZWNpcGUsIHJlY2lwZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVjaXBlc1tyZWNpcGVdLnVybCA9IGByZWNpcGVWaWV3KHsncmVjaXBlSWQnOiAnJHtyZWNpcGVzW3JlY2lwZV0ueXVtbWx5X2lkfSd9KWA7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY2lwZXNbcmVjaXBlXS50b3RhbFRpbWVJblNlY29uZHMgJiYgcmVjaXBlc1tyZWNpcGVdLnRvdGFsVGltZUluU2Vjb25kcyA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwZXNbcmVjaXBlXS50b3RhbFRpbWVTdHJpbmcgPSBgJHtyZWNpcGVzW3JlY2lwZV0udG90YWxUaW1lSW5TZWNvbmRzIC8gNjB9IG1pbnV0ZXNgO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVjaXBlc1tyZWNpcGVdLnJhdGluZ0FycmF5ID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogJ25vIHJlY2lwZSBmb3VuZCcgaW1hZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWNpcGVzW3JlY2lwZV0uc21hbGxJbWFnZVVybHMgJiYgcmVjaXBlc1tyZWNpcGVdLnNtYWxsSW1hZ2VVcmxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwZXNbcmVjaXBlXS5pbWFnZVVybCA9IGAke3JlY2lwZXNbcmVjaXBlXS5zbWFsbEltYWdlVXJsc1swXS5zcGxpdCgnPScpWzBdfT1zMzYwYDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDtpIDwgcmVjaXBlc1tyZWNpcGVdLnJhdGluZztpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2lwZXNbcmVjaXBlXS5yYXRpbmdBcnJheS5wdXNoKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSByZWNpcGVzW3JlY2lwZV0ucmF0aW5nO2kgPCA1O2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjaXBlc1tyZWNpcGVdLnJhdGluZ0FycmF5LnB1c2goZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSk7XG59XG5cbi8vIFBhcnNlIGFuIGluZGl2aWR1YWwgcmVjaXBlLlxuZnVuY3Rpb24gcGFyc2VSZWNpcGUocHJvbWlzZSkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnRvdGFsVGltZUluU2Vjb25kcyAmJiByZXNwb25zZS5kYXRhLnRvdGFsVGltZUluU2Vjb25kcyA+IDEpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudG90YWxUaW1lU3RyaW5nID0gYCR7cmVzcG9uc2UuZGF0YS50b3RhbFRpbWVJblNlY29uZHMgLyA2MH0gbWludXRlc2A7XG4gICAgICAgIH1cbiAgICAgICAgcmVzcG9uc2UuZGF0YS5yYXRpbmdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDtpIDwgcmVzcG9uc2UuZGF0YS5yYXRpbmc7aSsrKSB7XG4gICAgICAgICAgICByZXNwb25zZS5kYXRhLnJhdGluZ0FycmF5LnB1c2godHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IHJlc3BvbnNlLmRhdGEucmF0aW5nO2kgPCA1O2krKykge1xuICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5yYXRpbmdBcnJheS5wdXNoKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3BvbnNlLmRhdGEuaW1hZ2VVcmwgPSBgJHtyZXNwb25zZS5kYXRhLmltYWdlVXJsc0J5U2l6ZVtPYmplY3Qua2V5cyhyZXNwb25zZS5kYXRhLmltYWdlVXJsc0J5U2l6ZSlbMF1dLnNwbGl0KCc9JylbMF19PXM3NTBgO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIFJlY2lwZVNlcnZpY2UoJGh0dHAsICRxLCBBdXRoU2VydmljZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldFJlY2lwZVN0cmVhbTogKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUmVjaXBlQXJyYXkoJGh0dHAuZ2V0KGBodHRwOi8vYXBpLmtpdGNoZW4uc3VwcG9ydC9zdHJlYW1gKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFNlYXJjaDogKHBhcmFtcykgPT4ge1xuICAgICAgICAgICAgY29uc3Qge3NlYXJjaFRlcm0sIGxpbWl0ID0gMjgsIG9mZnNldCA9IDB9ID0gcGFyYW1zO1xuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBBdXRoU2VydmljZS5nZXRBcGlUb2tlbigpO1xuXG4gICAgICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNpcGVBcnJheSgkaHR0cC5nZXQoYGh0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L3JlY2lwZXMvc2VhcmNoLyR7c2VhcmNoVGVybX0/bGltaXQ9JHtsaW1pdH0mb2Zmc2V0PSR7b2Zmc2V0fSZhcGlfdG9rZW49JHt0b2tlbn1gKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZVJlY2lwZUFycmF5KCRodHRwLmdldChgaHR0cDovL2FwaS5raXRjaGVuLnN1cHBvcnQvcmVjaXBlcy9zZWFyY2gvJHtzZWFyY2hUZXJtfT9saW1pdD0ke2xpbWl0fSZvZmZzZXQ9JHtvZmZzZXR9YCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXRSZWNpcGU6IChyZWNpcGVJZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBBdXRoU2VydmljZS5nZXRBcGlUb2tlbigpO1xuXG4gICAgICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNpcGUoJGh0dHAuZ2V0KGBodHRwOi8vYXBpLmtpdGNoZW4uc3VwcG9ydC9yZWNpcGU/eXVtbWx5X2lkPSR7cmVjaXBlSWR9JmFwaV90b2tlbj0ke3Rva2VufWApKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlUmVjaXBlKCRodHRwLmdldChgaHR0cDovL2FwaS5raXRjaGVuLnN1cHBvcnQvcmVjaXBlP3l1bW1seV9pZD0ke3JlY2lwZUlkfWApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZmF2b3JpdGVSZWNpcGU6IChyZWNpcGVJZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYGh0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L2Zhdm9yaXRlc2AsIHthcGlfdG9rZW46IEF1dGhTZXJ2aWNlLmdldEFwaVRva2VuKCksIHJlY2lwZV9pZDogcmVjaXBlSWR9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5GYXZvcml0ZVJlY2lwZTogKHJlY2lwZUlkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChgaHR0cDovL2FwaS5raXRjaGVuLnN1cHBvcnQvZmF2b3JpdGVzYCwge2FwaV90b2tlbjogQXV0aFNlcnZpY2UuZ2V0QXBpVG9rZW4oKSwgcmVjaXBlX2lkOiByZWNpcGVJZCwgdmFsdWU6IGZhbHNlfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGxpa2VSZWNpcGU6IChyZWNpcGVJZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYGh0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L2xpa2VzYCwge2FwaV90b2tlbjogQXV0aFNlcnZpY2UuZ2V0QXBpVG9rZW4oKSwgcmVjaXBlX2lkOiByZWNpcGVJZH0pO1xuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZVJlY2lwZTogKHJlY2lwZUlkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChgaHR0cDovL2FwaS5raXRjaGVuLnN1cHBvcnQvY29tcGxldGVkYCwge2FwaV90b2tlbjogQXV0aFNlcnZpY2UuZ2V0QXBpVG9rZW4oKSwgcmVjaXBlX2lkOiByZWNpcGVJZH0pO1xuICAgICAgICB9LFxuICAgICAgICB1bkxpa2VSZWNpcGU6IChyZWNpcGVJZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYGh0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L2xpa2VzYCwge2FwaV90b2tlbjogQXV0aFNlcnZpY2UuZ2V0QXBpVG9rZW4oKSwgcmVjaXBlX2lkOiByZWNpcGVJZCwgdmFsdWU6IGZhbHNlfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHVuQ29tcGxldGVSZWNpcGU6IChyZWNpcGVJZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYGh0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L2NvbXBsZXRlZGAsIHthcGlfdG9rZW46IEF1dGhTZXJ2aWNlLmdldEFwaVRva2VuKCksIHJlY2lwZV9pZDogcmVjaXBlSWQsIHZhbHVlOiBmYWxzZX0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRMaWtlZDogKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUmVjaXBlQXJyYXkoJGh0dHAuZ2V0KGBodHRwOi8vYXBpLmtpdGNoZW4uc3VwcG9ydC9saWtlcz9hcGlfdG9rZW49JHtBdXRoU2VydmljZS5nZXRBcGlUb2tlbigpfWApKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0RmF2b3JpdGVkOiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNpcGVBcnJheSgkaHR0cC5nZXQoYGh0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L2Zhdm9yaXRlcz9hcGlfdG9rZW49JHtBdXRoU2VydmljZS5nZXRBcGlUb2tlbigpfWApKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q29tcGxldGVkOiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNpcGVBcnJheSgkaHR0cC5nZXQoYGh0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L2NvbXBsZXRlZD9hcGlfdG9rZW49JHtBdXRoU2VydmljZS5nZXRBcGlUb2tlbigpfWApKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UmVjaXBlU3RyZWFtOiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNpcGVBcnJheSgkaHR0cC5nZXQoYGh0dHA6Ly9hcGkua2l0Y2hlbi5zdXBwb3J0L3N0cmVhbT9hcGlfdG9rZW49JHtBdXRoU2VydmljZS5nZXRBcGlUb2tlbigpfWApKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFsnJGh0dHAnLCAnJHEnLCAnQXV0aFNlcnZpY2UnLCBSZWNpcGVTZXJ2aWNlXTtcbiIsImltcG9ydCB7YXBwfSBmcm9tICcuLi9ib290c3RyYXAnO1xuXG5pbXBvcnQgQXV0aFNlcnZpY2UgZnJvbSAnLi9BdXRoU2VydmljZSc7XG5pbXBvcnQgUmVjaXBlU2VydmljZSBmcm9tICcuL1JlY2lwZVNlcnZpY2UnO1xuaW1wb3J0IEluZ3JlZGllbnRTZXJ2aWNlIGZyb20gJy4vSW5ncmVkaWVudFNlcnZpY2UnO1xuXG5hcHAuZmFjdG9yeSgnQXV0aFNlcnZpY2UnLCBBdXRoU2VydmljZSk7XG5hcHAuZmFjdG9yeSgnUmVjaXBlU2VydmljZScsIFJlY2lwZVNlcnZpY2UpO1xuYXBwLmZhY3RvcnkoJ0luZ3JlZGllbnRTZXJ2aWNlJywgSW5ncmVkaWVudFNlcnZpY2UpO1xuIiwiZXhwb3J0IGNvbnN0IGFwcE5hbWUgPSAna3NhcHAnO1xuIl19
